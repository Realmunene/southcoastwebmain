{"ast":null,"code":"import _objectSpread from\"/root/southcoastwebmain/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from\"react\";import logo from\"./images/IMG-20251008-WA0008logo0.png\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function AdminDashboard(){const[activeTab,setActiveTab]=useState(\"bookings\");const[loading,setLoading]=useState(true);const[currentAdminRole,setCurrentAdminRole]=useState(1);const[currentAdminName,setCurrentAdminName]=useState(\"Admin\");const[stats,setStats]=useState({totalUsers:0,totalBookings:0,activeBookings:0,totalMessages:0,totalPartners:0});const[successMessage,setSuccessMessage]=useState(\"\");const[apiErrors,setApiErrors]=useState({});const loadFallbackAdminData=useCallback(()=>{const storedRole=localStorage.getItem(\"adminRole\")||1;const storedName=localStorage.getItem(\"adminName\")||localStorage.getItem(\"adminEmail\")||\"Admin\";setCurrentAdminRole(parseInt(storedRole));setCurrentAdminName(storedName);},[]);const fetchAdminProfile=useCallback(async()=>{try{const token=localStorage.getItem(\"adminToken\");if(!token){console.error(\"No admin token found\");setLoading(false);return;}try{const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/profile\",{method:\"GET\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);loadFallbackAdminData();return;}let adminRole=1;let adminName=\"Admin\";if(data.role!==undefined){adminRole=parseInt(data.role);}else if(data.data&&data.data.role!==undefined){adminRole=parseInt(data.data.role);}else if(data.admin&&data.admin.role!==undefined){adminRole=parseInt(data.admin.role);}if(data.name){adminName=data.name;}else if(data.data&&data.data.name){adminName=data.data.name;}else if(data.admin&&data.admin.name){adminName=data.admin.name;}else if(data.email){adminName=data.email;}else if(data.data&&data.data.email){adminName=data.data.email;}else if(data.admin&&data.admin.email){adminName=data.admin.email;}setCurrentAdminRole(adminRole);setCurrentAdminName(adminName);localStorage.setItem(\"adminRole\",adminRole.toString());localStorage.setItem(\"adminName\",adminName);}else if(response.status===404){console.warn(\"Profile endpoint not found, using fallback data\");loadFallbackAdminData();}else{console.warn(\"Profile fetch failed with status:\",response.status);loadFallbackAdminData();}}catch(profileError){console.error(\"Failed to fetch admin profile:\",profileError);loadFallbackAdminData();}}catch(error){console.error(\"Error in fetchAdminProfile:\",error);loadFallbackAdminData();}},[loadFallbackAdminData]);const fetchDashboardStats=useCallback(async()=>{try{setLoading(true);const token=localStorage.getItem(\"adminToken\");if(!token){console.error(\"No admin token found\");setLoading(false);return;}const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/stats\",{method:\"GET\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);return;}let statsData=data;if(data.data){statsData=data.data;}if(data.stats){statsData=data.stats;}const formattedStats={totalUsers:statsData.totalUsers||statsData.users||statsData.total_users||0,totalBookings:statsData.totalBookings||statsData.bookings||statsData.total_bookings||0,activeBookings:statsData.activeBookings||statsData.active_bookings||0,totalMessages:statsData.totalMessages||statsData.messages||statsData.total_messages||0,totalPartners:statsData.totalPartners||statsData.partners||statsData.total_partners||0};setStats(formattedStats);}else{console.warn(\"Stats fetch failed with status:\",response.status);}}catch(error){console.error(\"Failed to fetch stats:\",error);}finally{setLoading(false);}},[]);useEffect(()=>{fetchAdminProfile();fetchDashboardStats();},[fetchAdminProfile,fetchDashboardStats]);useEffect(()=>{if(successMessage){const timer=setTimeout(()=>{setSuccessMessage(\"\");},5000);return()=>clearTimeout(timer);}},[successMessage]);const getTabs=useCallback(()=>{const baseTabs=[{id:\"bookings\",name:\"Bookings\"},{id:\"users\",name:\"Users\"},{id:\"messages\",name:\"Messages\"},{id:\"partners\",name:\"Partners\"},{id:\"complimentNote\",name:\"Compliment Note\"}];if(currentAdminRole===0){const tabsWithAdmin=[...baseTabs];tabsWithAdmin.splice(2,0,{id:\"admins\",name:\"Admins\"});tabsWithAdmin.splice(3,0,{id:\"payments\",name:\"Payments\"});return tabsWithAdmin;}return baseTabs;},[currentAdminRole]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-lg border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Admin Dashboard\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-4 bg-gray-200 rounded animate-pulse\"})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\",children:[...Array(5)].map((_,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-200 p-3 rounded-xl mr-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 bg-gray-300 rounded\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-3/4 mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-200 rounded w-1/2\"})]})]})},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-200 rounded w-1/4 mb-6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-5/6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-4/6\"})]})]})})]})]});}const tabs=getTabs();return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-lg border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-cyan-400 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-lg\",children:\"SC\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Southcoast Outdoors Management\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[\"Welcome, \",currentAdminName]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:currentAdminRole===0?\"Super Administrator\":\"Administrator\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{fetchAdminProfile();fetchDashboardStats();},className:\"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5\",children:\"\\u21BB Refresh Data\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",clipRule:\"evenodd\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-green-800\",children:successMessage})})]})}),Object.keys(apiErrors).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-xl shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\",clipRule:\"evenodd\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-red-800\",children:\"API Errors Detected\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-1\",children:Object.entries(apiErrors).map(_ref=>{let[endpoint,error]=_ref;return/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-700\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[endpoint,\":\"]}),\" \",error]},endpoint);})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Users\",value:stats.totalUsers,icon:\"\\uD83D\\uDC65\",color:\"blue\",trend:\"+12%\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Total Bookings\",value:stats.totalBookings,icon:\"\\uD83D\\uDCC5\",color:\"green\",trend:\"+8%\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Active Bookings\",value:stats.activeBookings,icon:\"\\uD83C\\uDFE8\",color:\"purple\",trend:\"+5%\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Messages\",value:stats.totalMessages,icon:\"\\uD83D\\uDCAC\",color:\"amber\",trend:\"+23%\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Total Partners\",value:stats.totalPartners,icon:\"\\uD83E\\uDD1D\",color:\"indigo\",trend:\"+3%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100\",children:tabs.map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"flex-shrink-0 py-5 px-6 text-sm font-semibold border-b-2 transition-all duration-200 whitespace-nowrap \".concat(activeTab===tab.id?\"border-blue-500 text-blue-600 bg-white shadow-sm\":\"border-transparent text-gray-600 hover:text-gray-900 hover:bg-white hover:bg-opacity-50\"),children:tab.name},tab.id))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 sm:p-8\",children:[activeTab===\"bookings\"&&/*#__PURE__*/_jsx(BookingsManagement,{currentAdminRole:currentAdminRole,setSuccessMessage:setSuccessMessage,setApiErrors:setApiErrors}),activeTab===\"users\"&&/*#__PURE__*/_jsx(UsersManagement,{currentAdminRole:currentAdminRole,setApiErrors:setApiErrors}),activeTab===\"admins\"&&currentAdminRole===0&&/*#__PURE__*/_jsx(AdminManagement,{currentAdminRole:currentAdminRole,setApiErrors:setApiErrors}),activeTab===\"payments\"&&currentAdminRole===0&&/*#__PURE__*/_jsx(SuperAdminPayments,{currentAdminRole:currentAdminRole,setApiErrors:setApiErrors}),activeTab===\"messages\"&&/*#__PURE__*/_jsx(MessagesManagement,{currentAdminRole:currentAdminRole,setApiErrors:setApiErrors}),activeTab===\"partners\"&&/*#__PURE__*/_jsx(PartnersManagement,{currentAdminRole:currentAdminRole,setApiErrors:setApiErrors}),activeTab===\"complimentNote\"&&/*#__PURE__*/_jsx(ComplimentNoteModal,{})]})]})]})]});}const StatCard=_ref2=>{let{title,value,icon,color,trend}=_ref2;const colorClasses={blue:\"from-blue-500 to-cyan-500\",green:\"from-green-500 to-emerald-500\",purple:\"from-purple-500 to-violet-500\",amber:\"from-amber-500 to-orange-500\",indigo:\"from-indigo-500 to-blue-500\"};const bgColorClasses={blue:\"bg-blue-50 border-blue-100\",green:\"bg-green-50 border-green-100\",purple:\"bg-purple-50 border-purple-100\",amber:\"bg-amber-50 border-amber-100\",indigo:\"bg-indigo-50 border-indigo-100\"};return/*#__PURE__*/_jsx(\"div\",{className:\"rounded-2xl border-2 \".concat(bgColorClasses[color],\" p-6 transition-all duration-300 hover:shadow-lg hover:scale-105\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-2\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:value.toLocaleString()}),trend&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs font-medium text-green-600 mt-2\",children:[\"\\u2191 \",trend,\" from last month\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-14 h-14 rounded-xl bg-gradient-to-r \".concat(colorClasses[color],\" flex items-center justify-center shadow-md\"),children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl text-white\",children:icon})})]})});};const SuperAdminPayments=_ref3=>{let{currentAdminRole,setApiErrors}=_ref3;const[payments,setPayments]=useState([]);const[loading,setLoading]=useState(true);const[updating,setUpdating]=useState({});const[exporting,setExporting]=useState(false);const[lastUpdated,setLastUpdated]=useState(null);const API_BASE=\"http://127.0.0.1:3000/api/v1/admin\";// Enhanced fetchPayments with proper state management\nconst fetchPayments=useCallback(async function(){let showLoading=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;try{if(showLoading)setLoading(true);const token=localStorage.getItem(\"adminToken\");if(!token){throw new Error(\"Authentication required\");}const response=await fetch(\"\".concat(API_BASE,\"/payments\"),{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});if(!response.ok){throw new Error(\"HTTP \".concat(response.status,\": \").concat(response.statusText));}const data=await response.json();console.log(\"Fetched payments data:\",data);const paymentsData=data.payments||data||[];setPayments(Array.isArray(paymentsData)?paymentsData:[]);setLastUpdated(new Date());}catch(error){console.error(\"Error fetching payments:\",error);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{payments:error.message||\"Failed to load payments\"}));}finally{if(showLoading)setLoading(false);}},[setApiErrors]);useEffect(()=>{fetchPayments();},[fetchPayments]);// Optimized polling - only refresh when needed\nuseEffect(()=>{const interval=setInterval(()=>{// Only auto-refresh if not currently updating anything\nif(Object.keys(updating).length===0){fetchPayments(false);// Silent refresh without loading indicator\n}},10000);// Reduced to 10 seconds for better real-time updates\nreturn()=>clearInterval(interval);},[fetchPayments,updating]);// FIXED: updatePaymentStatus that properly updates both admin and user sides\nconst updatePaymentStatus=async(bookingId,newStatus)=>{const updateKey=\"\".concat(bookingId,\"_\").concat(newStatus);if(updating[updateKey])return;setUpdating(prev=>_objectSpread(_objectSpread({},prev),{},{[updateKey]:true}));try{const token=localStorage.getItem(\"adminToken\");if(!token){throw new Error(\"Authentication required\");}console.log(\"Updating booking:\",bookingId,\"to status:\",newStatus);const response=await fetch(\"\".concat(API_BASE,\"/bookings/\").concat(bookingId,\"/payment_status\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({payment_status:newStatus})});const responseData=await response.json();console.log(\"Update response:\",responseData);if(response.ok){const statusText=newStatus.replace('_',' ').toUpperCase();// FIX: Update local state immediately for better UX\nsetPayments(prevPayments=>prevPayments.map(payment=>{const paymentData=getPaymentDisplayData(payment);if(paymentData.bookingId==bookingId){// Create a deep copy and update payment_status at all levels\nconst updatedPayment=JSON.parse(JSON.stringify(payment));// Update payment_status at root level\nupdatedPayment.payment_status=newStatus;updatedPayment.status=newStatus;// Update payment_status in nested booking object if it exists\nif(updatedPayment.booking){updatedPayment.booking.payment_status=newStatus;}return updatedPayment;}return payment;}));setLastUpdated(new Date());alert(\"\\u2705 Payment status updated to: \".concat(statusText));// Force a refresh to ensure backend consistency\nsetTimeout(()=>fetchPayments(false),1000);}else{throw new Error(responseData.error||responseData.message||\"Failed to update payment status\");}}catch(error){console.error(\"Error updating payment status:\",error);alert(\"\\u274C \".concat(error.message||\"Failed to update payment status\"));// Revert by refetching actual data\nfetchPayments(false);}finally{setUpdating(prev=>_objectSpread(_objectSpread({},prev),{},{[updateKey]:false}));}};const handleExport=async format=>{setExporting(true);try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"\".concat(API_BASE,\"/payments/export?format=\").concat(format),{headers:{Authorization:\"Bearer \".concat(token)}});if(!response.ok)throw new Error(\"Export failed: HTTP \".concat(response.status));const blob=await response.blob();const url=window.URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.download=\"payments_report.\".concat(format);link.click();window.URL.revokeObjectURL(url);}catch(error){console.error(\"Export error:\",error);alert(\"Failed to export payments\");}finally{setExporting(false);}};const getStatusColor=status=>{if(!status)return'bg-gray-100 text-gray-800 border border-gray-300';switch(status.toLowerCase()){case'pending':return'bg-amber-100 text-amber-800 border border-amber-300';case'partial_paid':return'bg-blue-100 text-blue-800 border border-blue-300';case'payment_made':return'bg-emerald-100 text-emerald-800 border border-emerald-300';default:return'bg-gray-100 text-gray-800 border border-gray-300';}};const getStatusText=status=>{if(!status)return'â“ NO STATUS';switch(status.toLowerCase()){case'pending':return'â³ WAITING FOR ADMIN CONFIRMATION';case'partial_paid':return'ðŸ’° PARTIAL PAID';case'payment_made':return'âœ… FULLY PAID';default:return\"\\u2753 \".concat(status.toUpperCase());}};const formatDate=dateString=>{if(!dateString)return'N/A';try{return new Date(dateString).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"short\",day:\"numeric\"});}catch(e){return'Invalid Date';}};const calculateTotalGuests=(adults,children)=>{const adultsCount=parseInt(adults)||0;const childrenCount=parseInt(children)||0;return adultsCount+childrenCount;};// FIXED: Enhanced getPaymentDisplayData to properly extract all data\nconst getPaymentDisplayData=payment=>{console.log(\"Raw payment data for debugging:\",payment);// FIX: Better payment status extraction\nconst paymentStatus=payment.payment_status||payment.status||payment.booking&&payment.booking.payment_status||'pending';// Default to pending if not found\nconst bookingId=payment.booking_id||payment.bookingId||payment.booking&&payment.booking.id||payment.id;// FIX: Enhanced data extraction with multiple fallbacks\nconst adults=payment.adults||payment.booking&&payment.booking.adults||payment.booking_details&&payment.booking_details.adults||payment.guests&&payment.guests.adults||1;// Default to 1 adult\nconst children=payment.children||payment.booking&&payment.booking.children||payment.booking_details&&payment.booking_details.children||payment.guests&&payment.guests.children||0;const nationality=payment.nationality||payment.booking&&payment.booking.nationality||payment.booking_details&&payment.booking_details.nationality||payment.user&&payment.user.nationality||'Not specified';const amount=payment.amount||payment.payment_amount||payment.booking&&payment.booking.payment_amount||payment.booking&&payment.booking.amount||'N/A';return{id:payment.id||'N/A',bookingId:bookingId,roomType:payment.room_type||payment.roomType||payment.booking&&payment.booking.room_type||'Unknown Room',userName:payment.user_name||payment.userName||payment.user&&payment.user.name||'N/A',userEmail:payment.user_email||payment.userEmail||payment.user&&payment.user.email||'N/A',phone:payment.phone||payment.mpesa_phone||payment.booking&&payment.booking.mpesa_phone||'N/A',createdAt:payment.created_at||payment.createdAt,checkIn:payment.check_in||payment.checkIn||payment.booking&&payment.booking.check_in,checkOut:payment.check_out||payment.checkOut||payment.booking&&payment.booking.check_out,adults:adults,children:children,nationality:nationality,amount:amount,paymentStatus:paymentStatus};};if(loading)return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 font-medium\",children:\"Loading payment data...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Please wait while we fetch the latest information\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Payment Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Manage and confirm user payments\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600 mt-1\",children:[\"\\uD83D\\uDD04 Auto-refreshes every 10 seconds \\u2022 Last updated: \",lastUpdated?lastUpdated.toLocaleTimeString():'Never']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchPayments(true),className:\"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg\",children:\"\\u21BB Refresh Data\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExport('csv'),disabled:exporting,className:\"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\",children:exporting?'ðŸ“¤ Exporting...':'ðŸ“Š Export CSV'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExport('pdf'),disabled:exporting,className:\"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\",children:exporting?'ðŸ“¤ Exporting...':'ðŸ“„ Export PDF'})]})]}),payments.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl border-2 border-dashed border-gray-300 p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:\"\\uD83D\\uDCB8\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"No payments yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 max-w-md mx-auto\",children:\"No payments have been initiated yet. Payments will appear here once users start making bookings and payments.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:payments.map(payment=>{const paymentData=getPaymentDisplayData(payment);const updateKeyPending=\"\".concat(paymentData.bookingId,\"_pending\");const updateKeyPartial=\"\".concat(paymentData.bookingId,\"_partial_paid\");const updateKeyFull=\"\".concat(paymentData.bookingId,\"_payment_made\");return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-xl\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col xl:flex-row xl:items-start xl:justify-between gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:[\"Booking #\",paymentData.bookingId]}),/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(getStatusColor(paymentData.paymentStatus),\" text-xs font-bold px-3 py-1.5 rounded-full\"),children:getStatusText(paymentData.paymentStatus)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-blue-600 mb-2\",children:paymentData.roomType}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-gray-400 rounded-full\"}),\"User: \",paymentData.userName]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-gray-400 rounded-full\"}),\"Email: \",paymentData.userEmail]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-gray-400 rounded-full\"}),\"Phone: \",paymentData.phone]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-gray-400 rounded-full\"}),\"Created: \",formatDate(paymentData.createdAt)]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-4 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-1\",children:\"Check-in\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-gray-900\",children:formatDate(paymentData.checkIn)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-4 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-1\",children:\"Check-out\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-gray-900\",children:formatDate(paymentData.checkOut)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-4 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-1\",children:\"Total Guests\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold text-gray-900\",children:[calculateTotalGuests(paymentData.adults,paymentData.children),paymentData.adults>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500 block mt-1\",children:[\"(\",paymentData.adults,\" adults, \",paymentData.children,\" children)\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-4 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-1\",children:\"Nationality\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-gray-900\",children:paymentData.nationality})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-900 mb-4 text-lg\",children:\"Payment Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-2\",children:\"Amount\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[\"KES \",paymentData.amount||'N/A']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-2\",children:\"M-Pesa Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-mono font-semibold text-gray-900\",children:paymentData.phone||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 mb-2\",children:\"Current Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold \".concat(paymentData.paymentStatus==='pending'?'text-amber-600':paymentData.paymentStatus==='partial_paid'?'text-blue-600':paymentData.paymentStatus==='payment_made'?'text-emerald-600':'text-gray-600'),children:getStatusText(paymentData.paymentStatus)})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"xl:w-80 flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-6 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-900 text-sm uppercase tracking-wider mb-4\",children:\"Update Payment Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-4 text-center\",children:\"This will update both admin and user views\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updatePaymentStatus(paymentData.bookingId,'pending'),disabled:updating[updateKeyPending]||paymentData.paymentStatus==='pending',className:\"w-full px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 \".concat(paymentData.paymentStatus==='pending'?'bg-amber-500 text-white cursor-not-allowed border-2 border-amber-600 shadow-inner':'bg-amber-100 text-amber-800 hover:bg-amber-200 border border-amber-300 hover:shadow-md'),children:updating[updateKeyPending]?'â³ Updating...':'â³ Set as Pending'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updatePaymentStatus(paymentData.bookingId,'partial_paid'),disabled:updating[updateKeyPartial]||paymentData.paymentStatus==='partial_paid',className:\"w-full px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 \".concat(paymentData.paymentStatus==='partial_paid'?'bg-blue-500 text-white cursor-not-allowed border-2 border-blue-600 shadow-inner':'bg-blue-100 text-blue-800 hover:bg-blue-200 border border-blue-300 hover:shadow-md'),children:updating[updateKeyPartial]?'ðŸ”„ Updating...':'ðŸ’° Set as Partial Paid'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updatePaymentStatus(paymentData.bookingId,'payment_made'),disabled:updating[updateKeyFull]||paymentData.paymentStatus==='payment_made',className:\"w-full px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 \".concat(paymentData.paymentStatus==='payment_made'?'bg-emerald-500 text-white cursor-not-allowed border-2 border-emerald-600 shadow-inner':'bg-emerald-100 text-emerald-800 hover:bg-emerald-200 border border-emerald-300 hover:shadow-md'),children:updating[updateKeyFull]?'ðŸ”„ Updating...':'âœ… Set as Fully Paid'})]})]})})]})})},paymentData.id);})})]});};// ... (rest of the components - ComplimentNoteModal, PartnersManagement, PartnerForm, BookingsManagement, BookingForm, UsersManagement, AdminManagement, AdminForm, MessagesManagement)\n// Each of these would receive similar professional styling updates\nconst ComplimentNoteModal=()=>{const[accommodations,setAccommodations]=useState([\"Executive Room, Ensuite\",\"2-Connected Room, 1 Ensuite\",\"2 Bedroom Apartment - Living + Kitchen + 1 Ensuite\",\"3-BedRoom Apartment-Kitchen, 2 Ensuite\",\"ExecutiveRoom, Ensuite\",\"2-Connected Room, I-Ensuite\",\"2-BedRoom Apartment with Kitchen, 1-Ensuite\",\"Larger Apartment with Kitchen, Balcony, Living, 2 Ensuites\"]);const[location,setLocation]=useState(\"South Coast, Kenya â€” Near Diani Beach\");const[contact,setContact]=useState({phone:\"+254 7XX XXX XXX\",email:\"info@southcoastoutdoors.co.ke\"});const noteRef=useRef();const handlePrint=()=>{const printContents=noteRef.current.innerHTML;const printWindow=window.open(\"\",\"\",\"width=600,height=800\");printWindow.document.write(\"\\n      <html>\\n        <head>\\n          <title>Southcoast Outdoors With Compliments</title>\\n          <style>\\n            body {\\n              font-family: 'Inter', sans-serif;\\n              padding: 32px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              min-height: 100vh;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n            }\\n            .note-container {\\n              border: 2px solid #e2e8f0;\\n              border-radius: 20px;\\n              padding: 32px;\\n              width: 100%;\\n              max-width: 520px;\\n              margin: auto;\\n              box-shadow: 0 20px 40px rgba(0,0,0,0.1);\\n              background: white;\\n              position: relative;\\n              overflow: hidden;\\n            }\\n            .note-container::before {\\n              content: '';\\n              position: absolute;\\n              top: 0;\\n              left: 0;\\n              right: 0;\\n              height: 4px;\\n              background: linear-gradient(90deg, #667eea, #764ba2);\\n            }\\n            .header {\\n              display: flex;\\n              align-items: center;\\n              gap: 16px;\\n              border-bottom: 2px solid #f1f5f9;\\n              padding-bottom: 16px;\\n              margin-bottom: 20px;\\n            }\\n            .header img {\\n              width: 70px;\\n              height: 70px;\\n              border-radius: 16px;\\n              border: 2px solid #e2e8f0;\\n            }\\n            .header h1 {\\n              font-size: 1.5rem;\\n              font-weight: 700;\\n              color: #1e293b;\\n              margin: 0;\\n              line-height: 1.3;\\n            }\\n            .header span {\\n              font-size: 0.95rem;\\n              color: #64748b;\\n              font-weight: 500;\\n            }\\n            .section {\\n              margin-top: 1.5rem;\\n            }\\n            .section h2 {\\n              font-size: 1.1rem;\\n              font-weight: 600;\\n              color: #334155;\\n              margin-bottom: 8px;\\n              border-bottom: 2px solid #f1f5f9;\\n              display: inline-block;\\n              padding-bottom: 4px;\\n            }\\n            .section p {\\n              margin: 6px 0;\\n              font-size: 0.95rem;\\n              color: #475569;\\n              line-height: 1.5;\\n            }\\n            footer {\\n              margin-top: 2rem;\\n              text-align: center;\\n              font-size: 0.85rem;\\n              color: #64748b;\\n              border-top: 2px solid #f1f5f9;\\n              padding-top: 12px;\\n              font-style: italic;\\n            }\\n          </style>\\n        </head>\\n        <body>\".concat(printContents,\"</body>\\n      </html>\\n    \"));printWindow.document.close();printWindow.print();};const handleAddAccommodation=newItem=>{if(newItem.trim())setAccommodations([...accommodations,newItem]);};return/*#__PURE__*/_jsx(\"div\",{className:\"font-inter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 xl:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:noteRef,className:\"note-container bg-white rounded-2xl border-2 border-gray-200 p-6 sm:p-8 shadow-xl relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-blue-500 to-purple-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header flex items-center gap-5 mb-6 pb-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Southcoast Outdoors Logo\",className:\"w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 border-gray-200\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl sm:text-2xl font-bold text-gray-900 leading-tight\",children:\"Southcoast Outdoors\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 text-sm font-medium\",children:\"With Compliments\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-gray-800 font-semibold text-lg mb-4 pb-2 border-b-2 border-blue-100\",children:\"Our Accommodations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:accommodations.map((unit,idx)=>/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 text-base flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-500 mr-3\",children:\"\\u2022\"}),unit]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-gray-800 font-semibold text-lg mb-3 pb-2 border-b-2 border-blue-100\",children:\"Our Location\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-base\",children:location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-gray-800 font-semibold text-lg mb-3 pb-2 border-b-2 border-blue-100\",children:\"Contact Us\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 text-base\",children:[\"\\uD83D\\uDCDE Tel: \",contact.phone]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 text-base\",children:[\"\\u2709\\uFE0F Email: \",contact.email]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"text-center text-gray-500 text-sm border-t border-gray-200 pt-6 mt-8\",children:\"Thank you for choosing Southcoast Outdoors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-blue-900 font-bold text-xl mb-2\",children:\"Edit Note Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-700 text-sm\",children:\"Customize your compliment note template\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Add Accommodation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"e.g. Family Villas, Luxury Suite...\",className:\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\",onKeyDown:e=>{if(e.key===\"Enter\"){handleAddAccommodation(e.target.value);e.target.value=\"\";}}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:\"Press Enter to add new accommodation\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\",value:location,onChange:e=>setLocation(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\",value:contact.phone,onChange:e=>setContact(_objectSpread(_objectSpread({},contact),{},{phone:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\",value:contact.email,onChange:e=>setContact(_objectSpread(_objectSpread({},contact),{},{email:e.target.value}))})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePrint,className:\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\",children:\"\\uD83D\\uDDA8\\uFE0F Print Compliment Note\"})]})]})]})});};const PartnersManagement=_ref4=>{let{currentAdminRole,setApiErrors}=_ref4;const[partners,setPartners]=useState([]);const[loading,setLoading]=useState(true);const[editingPartner,setEditingPartner]=useState(null);const[showForm,setShowForm]=useState(false);const fetchPartners=useCallback(async()=>{try{const token=localStorage.getItem(\"adminToken\");if(!token){console.error(\"No admin token found\");setLoading(false);return;}const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/partners\",{headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);setPartners([]);return;}setPartners(data);}else{console.error(\"Failed to fetch partners:\",response.status);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{partners:\"HTTP \".concat(response.status)}));}}catch(error){console.error(\"Error fetching partners:\",error);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{partners:error.message}));}finally{setLoading(false);}},[setApiErrors]);useEffect(()=>{fetchPartners();},[fetchPartners]);const handleEdit=partner=>{if(currentAdminRole===0||partner.status!==\"active\"){setEditingPartner(partner);setShowForm(true);}else{alert(\"You don't have permission to edit active partners. Only Super Admin can edit active partners.\");}};const handleDelete=async partnerId=>{if(currentAdminRole!==0){alert(\"Only Super Admin can delete partners.\");return;}if(!window.confirm(\"Are you sure you want to delete this partner?\"))return;try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/partners/\".concat(partnerId),{method:\"DELETE\",headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){alert(\"Partner deleted successfully!\");fetchPartners();}else{alert(\"Failed to delete partner\");}}catch(error){console.error(\"Error deleting partner:\",error);alert(\"Failed to delete partner\");}};const handleSubmit=async formData=>{try{const token=localStorage.getItem(\"adminToken\");const url=editingPartner?\"http://127.0.0.1:3000/api/v1/admin/partners/\".concat(editingPartner.id):\"http://127.0.0.1:3000/api/v1/admin/partners\";const method=editingPartner?\"PUT\":\"POST\";const submitData=_objectSpread({},formData);if(editingPartner){if(!submitData.password){delete submitData.password;delete submitData.password_confirmation;}}const response=await fetch(url,{method:method,headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({partner:submitData})});const responseText=await response.text();let result;try{result=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);throw new Error(\"Server returned an invalid response.\");}if(response.ok){alert(\"Partner \".concat(editingPartner?'updated':'created',\" successfully!\"));setShowForm(false);setEditingPartner(null);fetchPartners();}else{var _result$errors;throw new Error(((_result$errors=result.errors)===null||_result$errors===void 0?void 0:_result$errors.join(', '))||result.error||'Failed to save partner');}}catch(error){console.error(\"Error saving partner:\",error);alert(\"Failed to save partner: \".concat(error.message));}};const togglePartnerStatus=async(partnerId,currentStatus)=>{if(currentAdminRole!==0){alert(\"Only Super Admin can change partner status.\");return;}try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/partners/\".concat(partnerId,\"/toggle_status\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){alert(\"Partner status updated successfully!\");fetchPartners();}else{alert(\"Failed to update partner status\");}}catch(error){console.error(\"Error updating partner status:\",error);alert(\"Failed to update partner status\");}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Loading partners...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Partners Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Add New Partner\"})]}),showForm&&/*#__PURE__*/_jsx(PartnerForm,{partner:editingPartner,onSubmit:handleSubmit,onCancel:()=>{setShowForm(false);setEditingPartner(null);},currentAdminRole:currentAdminRole}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Supplier Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Contact Person\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Mobile\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:partners.length>0?partners.map(partner=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:[\"#\",partner.id]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium\",children:partner.supplier_name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800\",children:partner.supplier_type})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:partner.contact_person}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:partner.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:partner.mobile}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:partner.city}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(partner.status==='active'?'bg-green-100 text-green-800':partner.status==='pending'?'bg-yellow-100 text-yellow-800':'bg-red-100 text-red-800'),children:partner.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(partner.created_at).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(partner),className:\"text-cyan-600 hover:text-cyan-900\",disabled:currentAdminRole!==0&&partner.status===\"active\",children:\"Edit\"}),currentAdminRole===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePartnerStatus(partner.id,partner.status),className:\"\".concat(partner.status==='active'?'text-orange-600 hover:text-orange-900':'text-green-600 hover:text-green-900'),children:partner.status==='active'?'Deactivate':'Activate'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(partner.id),className:\"text-red-600 hover:text-red-900\",children:\"Delete\"})]})]})]},partner.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"10\",className:\"px-4 py-4 text-center text-sm text-gray-500\",children:\"No partners found\"})})})]})})]});};const PartnerForm=_ref5=>{let{partner,onSubmit,onCancel,currentAdminRole}=_ref5;const[formData,setFormData]=useState({supplier_type:(partner===null||partner===void 0?void 0:partner.supplier_type)||\"\",supplier_name:(partner===null||partner===void 0?void 0:partner.supplier_name)||\"\",mobile:(partner===null||partner===void 0?void 0:partner.mobile)||\"\",email:(partner===null||partner===void 0?void 0:partner.email)||\"\",contact_person:(partner===null||partner===void 0?void 0:partner.contact_person)||\"\",password:\"\",password_confirmation:\"\",description:(partner===null||partner===void 0?void 0:partner.description)||\"\",city:(partner===null||partner===void 0?void 0:partner.city)||\"\",address:(partner===null||partner===void 0?void 0:partner.address)||\"\",status:(partner===null||partner===void 0?void 0:partner.status)||\"pending\"});const[errors,setErrors]=useState({});const handleChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));if(errors[name]){setErrors(_objectSpread(_objectSpread({},errors),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.supplier_type)newErrors.supplier_type='Supplier type is required';if(!formData.supplier_name)newErrors.supplier_name='Supplier name is required';if(!formData.email)newErrors.email='Email is required';if(!formData.contact_person)newErrors.contact_person='Contact person is required';if(!formData.mobile)newErrors.mobile='Mobile number is required';if(!formData.city)newErrors.city='City is required';if(!formData.address)newErrors.address='Address is required';if(!partner){if(!formData.password)newErrors.password='Password is required';if(formData.password.length<6)newErrors.password='Password must be at least 6 characters';if(formData.password!==formData.password_confirmation){newErrors.password_confirmation='Passwords do not match';}}else{if(formData.password&&formData.password.length<6){newErrors.password='Password must be at least 6 characters';}if(formData.password&&formData.password!==formData.password_confirmation){newErrors.password_confirmation='Passwords do not match';}}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=e=>{e.preventDefault();if(validateForm()){onSubmit(formData);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-2xl w-full p-4 sm:p-6 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:partner?'Edit Partner':'Add New Partner'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Supplier Type *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"supplier_type\",value:formData.supplier_type,onChange:handleChange,className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.supplier_type?'border-red-300':'border-gray-300'),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select supplier type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hotel\",children:\"Hotel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"restaurant\",children:\"Restaurant\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tour_operator\",children:\"Tour Operator\"}),/*#__PURE__*/_jsx(\"option\",{value:\"transport\",children:\"Transport Service\"}),/*#__PURE__*/_jsx(\"option\",{value:\"activity\",children:\"Activity Provider\"}),/*#__PURE__*/_jsx(\"option\",{value:\"travel_agency\",children:\"Travel Agency\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]}),errors.supplier_type&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.supplier_type})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Supplier Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"supplier_name\",value:formData.supplier_name,onChange:handleChange,placeholder:\"Enter your business name\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.supplier_name?'border-red-300':'border-gray-300'),required:true}),errors.supplier_name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.supplier_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Mobile *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"mobile\",value:formData.mobile,onChange:handleChange,placeholder:\"+254712345678\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.mobile?'border-red-300':'border-gray-300'),required:true}),errors.mobile&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.mobile})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Email Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,placeholder:\"Enter your email\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.email?'border-red-300':'border-gray-300'),required:true}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Contact Person *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"contact_person\",value:formData.contact_person,onChange:handleChange,placeholder:\"Enter your name\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.contact_person?'border-red-300':'border-gray-300'),required:true}),errors.contact_person&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.contact_person})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:[\"Password \",!partner&&'*']}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:partner?\"Leave blank to keep current password\":\"Enter your password\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.password?'border-red-300':'border-gray-300'),required:!partner}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:[\"Confirm Password \",!partner&&'*']}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password_confirmation\",value:formData.password_confirmation,onChange:handleChange,placeholder:\"Repeat your password\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.password_confirmation?'border-red-300':'border-gray-300'),required:!partner}),errors.password_confirmation&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.password_confirmation})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,placeholder:\"Describe your business\",rows:\"3\",className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",value:formData.city,onChange:handleChange,placeholder:\"Enter your city\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.city?'border-red-300':'border-gray-300'),required:true}),errors.city&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.city})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:handleChange,className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500\",disabled:currentAdminRole!==0,children:[/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]}),currentAdminRole!==0&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:\"Only Super Admin can change status\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Address *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"address\",value:formData.address,onChange:handleChange,placeholder:\"Enter your address\",rows:\"2\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.address?'border-red-300':'border-gray-300'),required:true}),errors.address&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"px-4 py-2 text-sm font-medium text-white bg-cyan-500 hover:bg-cyan-600 rounded-md transition\",children:[partner?'Update':'Create',\" Partner\"]})]})]})]})});};const BookingsManagement=_ref6=>{let{currentAdminRole,setSuccessMessage,setApiErrors}=_ref6;const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[editingBooking,setEditingBooking]=useState(null);const[showForm,setShowForm]=useState(false);const[nationalities,setNationalities]=useState([]);const[roomTypes,setRoomTypes]=useState([]);const[error,setError]=useState(\"\");const fetchBookings=useCallback(async()=>{try{setLoading(true);setError(\"\");const token=localStorage.getItem(\"adminToken\");if(!token){console.error(\"No admin token found\");setError(\"No authentication token found. Please log in again.\");setLoading(false);return;}const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/bookings\",{method:\"GET\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);setError(\"Server returned an invalid response format.\");setBookings([]);return;}if(Array.isArray(data)){setBookings(data);}else if(data.data&&Array.isArray(data.data)){setBookings(data.data);}else if(data.bookings&&Array.isArray(data.bookings)){setBookings(data.bookings);}else{console.warn(\"Unexpected bookings response format:\",data);setBookings([]);}}else if(response.status===500){setError(\"Server error: Unable to load bookings. Please try again later or contact support.\");console.error(\"Server error while fetching bookings:\",response.status);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{bookings:\"Internal Server Error (500)\"}));setBookings([]);}else{setError(\"Failed to load bookings: Server returned \".concat(response.status,\" error\"));console.error(\"Failed to fetch bookings:\",response.status);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{bookings:\"HTTP \".concat(response.status)}));setBookings([]);}}catch(error){setError(\"Network error: Unable to fetch bookings. Please check your connection.\");console.error(\"Error fetching bookings:\",error);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{bookings:error.message}));setBookings([]);}finally{setLoading(false);}},[setApiErrors]);const fetchNationalities=useCallback(async()=>{try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/nationalities\",{headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);setNationalities(getFallbackNationalities());return;}setNationalities(data);}else{setNationalities(getFallbackNationalities());}}catch(error){console.error(\"Error fetching nationalities:\",error);setNationalities(getFallbackNationalities());}},[]);const getFallbackNationalities=()=>[{id:1,name:\"Kenyan\"},{id:2,name:\"American\"},{id:3,name:\"British\"},{id:4,name:\"Canadian\"},{id:5,name:\"German\"},{id:6,name:\"French\"},{id:7,name:\"Chinese\"},{id:8,name:\"Indian\"}];const fetchRoomTypes=useCallback(async()=>{try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/room_types\",{headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);setRoomTypes(getFallbackRoomTypes());return;}setRoomTypes(data);}else{setRoomTypes(getFallbackRoomTypes());}}catch(error){console.error(\"Error fetching room types:\",error);setRoomTypes(getFallbackRoomTypes());}},[]);const getFallbackRoomTypes=()=>[{id:1,name:\"Single Room\"},{id:2,name:\"Double Room\"},{id:3,name:\"Deluxe Room\"},{id:4,name:\"Suite\"},{id:5,name:\"Executive Suite\"}];useEffect(()=>{fetchBookings();fetchNationalities();fetchRoomTypes();},[fetchBookings,fetchNationalities,fetchRoomTypes]);const handleEdit=booking=>{setEditingBooking(booking);setShowForm(true);};const handleDelete=async bookingId=>{if(currentAdminRole!==0){alert(\"Only Super Admin can delete bookings.\");return;}if(!window.confirm(\"Are you sure you want to delete this booking?\"))return;try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/bookings/\".concat(bookingId),{method:\"DELETE\",headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){setSuccessMessage(\"âœ… Booking deleted successfully!\");fetchBookings();}else if(response.status===500){alert(\"Server error: Unable to delete booking. Please try again later.\");}else{const errorData=await response.json().catch(()=>({}));alert(\"Failed to delete booking: \".concat(errorData.message||'Unknown error'));}}catch(error){console.error(\"Error deleting booking:\",error);alert(\"Failed to delete booking: Network error\");}};const handleSubmit=async formData=>{try{const token=localStorage.getItem(\"adminToken\");const url=editingBooking?\"http://127.0.0.1:3000/api/v1/admin/bookings/\".concat(editingBooking.id):\"http://127.0.0.1:3000/api/v1/admin/bookings\";const method=editingBooking?\"PUT\":\"POST\";const requestData={booking:{user_id:parseInt(formData.user_id),room_type:formData.room_type,check_in:formData.check_in,check_out:formData.check_out,guests:parseInt(formData.guests),nationality:formData.nationality,status:formData.status}};const response=await fetch(url,{method:method,headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify(requestData)});const responseText=await response.text();let result;try{result=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);throw new Error(\"Server returned an invalid response.\");}if(response.ok){const successMsg=editingBooking?\"âœ… Booking updated successfully!\":\"âœ… Booking created successfully!\";setSuccessMessage(successMsg);setShowForm(false);setEditingBooking(null);fetchBookings();}else if(response.status===500){throw new Error(\"Internal Server Error: The server encountered an error while processing your request. Please try again later.\");}else{var _result$errors2;const errorMessage=result.error||result.message||((_result$errors2=result.errors)===null||_result$errors2===void 0?void 0:_result$errors2.join(', '))||\"Server returned \".concat(response.status,\" error\");throw new Error(errorMessage);}}catch(error){console.error(\"Error saving booking:\",error);alert(\"Failed to save booking: \".concat(error.message));}};const handleRetry=()=>{fetchBookings();};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading bookings...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"All Bookings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Create New Booking\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-red-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-medium text-red-800\",children:\"Unable to Load Bookings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-red-600\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\",children:\"Try Again\"})})]}),showForm&&/*#__PURE__*/_jsx(BookingForm,{booking:editingBooking,onSubmit:handleSubmit,onCancel:()=>{setShowForm(false);setEditingBooking(null);},nationalities:nationalities,roomTypes:roomTypes})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"All Bookings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:fetchBookings,className:\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Create New Booking\"})]})]}),showForm&&/*#__PURE__*/_jsx(BookingForm,{booking:editingBooking,onSubmit:handleSubmit,onCancel:()=>{setShowForm(false);setEditingBooking(null);},nationalities:nationalities,roomTypes:roomTypes}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Booking ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Room Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Dates\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Guests\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:bookings.length>0?bookings.map(booking=>{var _booking$user;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:[\"#\",booking.id]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:((_booking$user=booking.user)===null||_booking$user===void 0?void 0:_booking$user.email)||booking.user_id||\"N/A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:booking.room_type}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:[new Date(booking.check_in).toLocaleDateString(),\" - \",new Date(booking.check_out).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:booking.guests}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(booking.status==='confirmed'?'bg-green-100 text-green-800':booking.status==='pending'?'bg-yellow-100 text-yellow-800':booking.status==='completed'?'bg-blue-100 text-blue-800':'bg-red-100 text-red-800'),children:booking.status})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(booking),className:\"text-cyan-600 hover:text-cyan-900 font-medium\",children:\"Edit\"}),currentAdminRole===0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(booking.id),className:\"text-red-600 hover:text-red-900 font-medium\",children:\"Delete\"})]})]},booking.id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"px-4 py-8 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No bookings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"No bookings have been created yet.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500\",children:\"Create New Booking\"})})]})})})})]})})]});};const BookingForm=_ref7=>{let{booking,onSubmit,onCancel,nationalities,roomTypes}=_ref7;const getTodayDate=()=>{const today=new Date();return today.toISOString().split('T')[0];};const getMinCheckoutDate=checkInDate=>{if(!checkInDate)return getTodayDate();const checkIn=new Date(checkInDate);const nextDay=new Date(checkIn);nextDay.setDate(checkIn.getDate()+1);return nextDay.toISOString().split('T')[0];};const[formData,setFormData]=useState({user_id:(booking===null||booking===void 0?void 0:booking.user_id)||\"\",room_type:(booking===null||booking===void 0?void 0:booking.room_type)||\"\",check_in:(booking===null||booking===void 0?void 0:booking.check_in)||getTodayDate(),check_out:(booking===null||booking===void 0?void 0:booking.check_out)||getMinCheckoutDate((booking===null||booking===void 0?void 0:booking.check_in)||getTodayDate()),guests:(booking===null||booking===void 0?void 0:booking.guests)||1,nationality:(booking===null||booking===void 0?void 0:booking.nationality)||\"\",status:(booking===null||booking===void 0?void 0:booking.status)||\"confirmed\"});const[errors,setErrors]=useState({});const handleChange=e=>{const{name,value}=e.target;setFormData(prevData=>{const newData=_objectSpread(_objectSpread({},prevData),{},{[name]:value});if(name==='check_in'&&value){const minCheckout=getMinCheckoutDate(value);if(new Date(newData.check_out)<=new Date(value)){newData.check_out=minCheckout;}}return newData;});if(errors[name]){setErrors(_objectSpread(_objectSpread({},errors),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.user_id)newErrors.user_id='User ID is required';if(!formData.room_type)newErrors.room_type='Room type is required';if(!formData.check_in)newErrors.check_in='Check-in date is required';if(!formData.check_out)newErrors.check_out='Check-out date is required';if(!formData.guests||formData.guests<1)newErrors.guests='Number of guests is required';if(!formData.nationality)newErrors.nationality='Nationality is required';const today=new Date(getTodayDate());const checkIn=new Date(formData.check_in);const checkOut=new Date(formData.check_out);if(checkIn<today){newErrors.check_in='Check-in date cannot be in the past';}if(checkOut<=checkIn){newErrors.check_out='Check-out date must be after check-in date';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=e=>{e.preventDefault();if(validateForm()){onSubmit(formData);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-md w-full p-4 sm:p-6 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:booking?'Edit Booking':'Create New Booking'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"User ID *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"user_id\",value:formData.user_id,onChange:handleChange,className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.user_id?'border-red-300':'border-gray-300'),required:true}),errors.user_id&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.user_id})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Room Type *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"room_type\",value:formData.room_type,onChange:handleChange,className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.room_type?'border-red-300':'border-gray-300'),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Room Type\"}),roomTypes.map(roomType=>/*#__PURE__*/_jsx(\"option\",{value:roomType.name,children:roomType.name},roomType.id))]}),errors.room_type&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.room_type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Check-in *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"check_in\",value:formData.check_in,onChange:handleChange,min:getTodayDate(),className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.check_in?'border-red-300':'border-gray-300'),required:true}),errors.check_in&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.check_in})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Check-out *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"check_out\",value:formData.check_out,onChange:handleChange,min:getMinCheckoutDate(formData.check_in),className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.check_out?'border-red-300':'border-gray-300'),required:true}),errors.check_out&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.check_out})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Guests *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"guests\",value:formData.guests,onChange:handleChange,min:\"1\",max:\"20\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.guests?'border-red-300':'border-gray-300'),required:true}),errors.guests&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.guests})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:handleChange,className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"confirmed\",children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Nationality *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"nationality\",value:formData.nationality,onChange:handleChange,className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.nationality?'border-red-300':'border-gray-300'),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Nationality\"}),nationalities.map(nationality=>/*#__PURE__*/_jsx(\"option\",{value:nationality.name,children:nationality.name},nationality.id))]}),errors.nationality&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.nationality})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"px-4 py-2 text-sm font-medium text-white bg-cyan-500 hover:bg-cyan-600 rounded-md transition\",children:[booking?'Update':'Create',\" Booking\"]})]})]})]})});};const UsersManagement=_ref8=>{let{currentAdminRole,setApiErrors}=_ref8;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const fetchUsers=useCallback(async()=>{try{const token=localStorage.getItem(\"adminToken\");if(!token){console.error(\"No admin token found\");setLoading(false);return;}const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/users\",{headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);setUsers([]);return;}setUsers(data);}else{console.error(\"Failed to fetch users:\",response.status);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{users:\"HTTP \".concat(response.status)}));}}catch(error){console.error(\"Error fetching users:\",error);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{users:error.message}));}finally{setLoading(false);}},[setApiErrors]);useEffect(()=>{fetchUsers();},[fetchUsers]);const handleDeleteUser=async userId=>{if(currentAdminRole!==0){alert(\"Only Super Admin can delete users.\");return;}if(!window.confirm(\"Are you sure you want to delete this user?\"))return;try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/users/\".concat(userId),{method:\"DELETE\",headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){alert(\"User deleted successfully!\");fetchUsers();}else{alert(\"Failed to delete user\");}}catch(error){console.error(\"Error deleting user:\",error);alert(\"Failed to delete user\");}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Loading users...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"Users Management\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"User ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Created At\"}),currentAdminRole===0&&/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:users.length>0?users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:[\"#\",user.id]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(user.role==='admin'?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:user.role})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(user.created_at).toLocaleDateString()}),currentAdminRole===0&&/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(user.id),className:\"text-red-600 hover:text-red-900\",children:\"Delete\"})})]},user.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:currentAdminRole===0?\"5\":\"4\",className:\"px-4 py-4 text-center text-sm text-gray-500\",children:\"No users found\"})})})]})})]});};const AdminManagement=_ref9=>{let{currentAdminRole,setApiErrors}=_ref9;const[admins,setAdmins]=useState([]);const[showForm,setShowForm]=useState(false);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const fetchAdmins=useCallback(async()=>{try{setLoading(true);setError(\"\");const token=localStorage.getItem(\"adminToken\");if(!token){setError(\"No authentication token found. Please log in again.\");setLoading(false);return;}const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/admins\",{method:\"GET\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();let data;try{data=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);setError(\"Server returned an invalid response format.\");setAdmins([]);return;}if(Array.isArray(data)){setAdmins(data);}else if(data.data&&Array.isArray(data.data)){setAdmins(data.data);}else if(data.admins&&Array.isArray(data.admins)){setAdmins(data.admins);}else{console.warn(\"Unexpected admins response format:\",data);setAdmins([]);}}else{setError(\"Failed to load admins: Server returned \".concat(response.status,\" error\"));setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{admins:\"HTTP \".concat(response.status)}));setAdmins([]);}}catch(error){setError(\"Network error: Unable to fetch admin data. Please check your connection.\");console.error(\"Error fetching admins:\",error);setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{admins:error.message}));setAdmins([]);}finally{setLoading(false);}},[setApiErrors]);useEffect(()=>{if(currentAdminRole===0){fetchAdmins();}},[currentAdminRole,fetchAdmins]);const handleCreateAdmin=async formData=>{try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/admins\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({admin:{email:formData.email,password:formData.password,password_confirmation:formData.password_confirmation,role:1}})});const responseText=await response.text();let result;try{result=JSON.parse(responseText);}catch(parseError){console.error(\"JSON Parse Error:\",parseError);throw new Error(\"Server returned an invalid response.\");}if(response.ok){alert(\"Admin created successfully!\");setShowForm(false);fetchAdmins();}else{var _result$errors3;throw new Error(((_result$errors3=result.errors)===null||_result$errors3===void 0?void 0:_result$errors3.join(', '))||result.error||\"Server returned \".concat(response.status,\" error\"));}}catch(error){console.error(\"Error creating admin:\",error);alert(\"Failed to create admin: \".concat(error.message));}};const handleDeleteAdmin=async adminId=>{if(!window.confirm(\"Are you sure you want to delete this admin? This action cannot be undone.\"))return;try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/admins/\".concat(adminId),{method:\"DELETE\",headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){alert(\"Admin deleted successfully!\");fetchAdmins();}else{alert(\"Failed to delete admin. Please try again.\");}}catch(error){console.error(\"Error deleting admin:\",error);alert(\"Failed to delete admin due to a network error.\");}};const handleRetry=()=>{fetchAdmins();};if(currentAdminRole!==0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-6 inline-block\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-yellow-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 15v2m-6 4h12a2 2 0 002-2v-3a2 2 0 00-2-2H6a2 2 0 00-2 2v3a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-medium text-yellow-800\",children:\"Access Restricted\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-yellow-700\",children:\"Admin Management is only available to Super Administrators.\"})]})});}if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading admin data...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Admin Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Add New Admin\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-12 w-12 text-red-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-red-800\",children:\"Unable to Load Admin Data\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-red-700\",children:/*#__PURE__*/_jsx(\"p\",{children:error})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleRetry,className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mr-2 h-4 w-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})}),\"Try Again\"]})})]})]})}),showForm&&/*#__PURE__*/_jsx(AdminForm,{onSubmit:handleCreateAdmin,onCancel:()=>setShowForm(false)})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Admin Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:fetchAdmins,className:\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Add New Admin\"})]})]}),showForm&&/*#__PURE__*/_jsx(AdminForm,{onSubmit:handleCreateAdmin,onCancel:()=>setShowForm(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm border border-gray-200 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Admin ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:admins.length>0?admins.map(admin=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:[\"#\",admin.id]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:admin.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(admin.role===0?'bg-purple-100 text-purple-800':'bg-blue-100 text-blue-800'),children:admin.role===0?'Super Admin':'Admin'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(admin.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteAdmin(admin.id),className:\"text-red-600 hover:text-red-900 font-medium\",disabled:admin.role===0,children:admin.role===0?'Cannot Delete':'Delete'})})]},admin.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"px-4 py-8 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 15v2m-6 4h12a2 2 0 002-2v-3a2 2 0 00-2-2H6a2 2 0 00-2 2v3a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No admins found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Get started by creating a new admin account.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500\",children:\"Add New Admin\"})})]})})})})]})})})]});};const AdminForm=_ref0=>{let{onSubmit,onCancel}=_ref0;const[formData,setFormData]=useState({email:\"\",password:\"\",password_confirmation:\"\",role:1});const[errors,setErrors]=useState({});const handleChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));if(errors[name]){setErrors(_objectSpread(_objectSpread({},errors),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.email)newErrors.email='Email is required';if(!formData.password)newErrors.password='Password is required';if(formData.password.length<6)newErrors.password='Password must be at least 6 characters';if(formData.password!==formData.password_confirmation){newErrors.password_confirmation='Passwords do not match';}const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(formData.email&&!emailRegex.test(formData.email)){newErrors.email='Please enter a valid email address';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=e=>{e.preventDefault();if(validateForm()){onSubmit(formData);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-md w-full p-4 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Create New Admin\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,placeholder:\"Enter admin email address\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.email?'border-red-300':'border-gray-300'),required:true}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Enter password (min 6 characters)\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.password?'border-red-300':'border-gray-300'),required:true,minLength:\"6\"}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Confirm Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password_confirmation\",value:formData.password_confirmation,onChange:handleChange,placeholder:\"Confirm password\",className:\"mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 \".concat(errors.password_confirmation?'border-red-300':'border-gray-300'),required:true,minLength:\"6\"}),errors.password_confirmation&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.password_confirmation})]}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"role\",value:1}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-md p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-blue-400\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-700\",children:[\"This admin will be created with \",/*#__PURE__*/_jsx(\"strong\",{children:\"Admin\"}),\" role. Only existing Super Admin can create other admins.\"]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 text-sm font-medium text-white bg-cyan-500 hover:bg-cyan-600 rounded-md transition\",children:\"Create Admin\"})]})]})]})});};const MessagesManagement=_ref1=>{let{currentAdminRole,setApiErrors}=_ref1;const[messages,setMessages]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const fetchMessages=useCallback(async()=>{try{setLoading(true);setError(\"\");const token=localStorage.getItem(\"adminToken\");if(!token){setError(\"No authentication token found. Please log in again.\");setLoading(false);return;}const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/contact_messages\",{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});if(response.ok){const responseText=await response.text();if(!responseText.trim()){setMessages([]);return;}let data;try{data=JSON.parse(responseText);}catch(e){console.error(\"Invalid JSON response:\",e);setError(\"Server returned invalid JSON.\");setMessages([]);return;}// Handle different response formats\nconst extracted=Array.isArray(data)?data:data.contact_messages?data.contact_messages:data.messages?data.messages:data.data?data.data:[];setMessages(extracted);}else if(response.status===401){// Handle unauthorized access - this should not happen for super admin\nsetError(\"Access denied. Please check your admin permissions.\");setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{messages:\"Unauthorized (401)\"}));}else if(response.status===403){setError(\"You don't have permission to access messages.\");setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{messages:\"Forbidden (403)\"}));}else{setError(\"Server returned \".concat(response.status,\" error\"));setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{messages:\"HTTP \".concat(response.status)}));setMessages([]);}}catch(error){setError(\"Network error. Please check your connection.\");setApiErrors(prev=>_objectSpread(_objectSpread({},prev),{},{messages:error.message}));setMessages([]);}finally{setLoading(false);}},[setApiErrors]);useEffect(()=>{fetchMessages();},[fetchMessages]);const handleMarkAsRead=async messageId=>{try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/contact_messages/\".concat(messageId,\"/mark_as_read\"),{method:\"PATCH\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});if(response.ok){setMessages(prev=>prev.map(msg=>msg.id===messageId?_objectSpread(_objectSpread({},msg),{},{status:\"read\"}):msg));}else if(response.status===401||response.status===403){alert(\"You don't have permission to mark messages as read.\");}}catch(error){console.error(\"Error marking read:\",error);}};const handleReply=message=>{const subject=encodeURIComponent(\"Re: Your message to Southcoast Outdoors\");const body=encodeURIComponent(\"Dear \".concat(message.name,\",\\n\\nThank you for contacting Southcoast Outdoors. We have received your message and will get back to you shortly.\\n\\nBest regards,\\nSouthcoast Outdoors Team\\n\\n---\\nOriginal Message:\\n\").concat(message.message));window.location.href=\"mailto:\".concat(message.email,\"?subject=\").concat(subject,\"&body=\").concat(body);};const handleDeleteMessage=async messageId=>{if(currentAdminRole!==0){alert(\"Only Super Admin can delete messages.\");return;}if(!window.confirm(\"Are you sure you want to delete this message?\"))return;try{const token=localStorage.getItem(\"adminToken\");const response=await fetch(\"http://127.0.0.1:3000/api/v1/admin/contact_messages/\".concat(messageId),{method:\"DELETE\",headers:{Authorization:\"Bearer \".concat(token)}});if(response.ok){setMessages(prev=>prev.filter(msg=>msg.id!==messageId));}else if(response.status===401||response.status===403){alert(\"You don't have permission to delete messages.\");}}catch(error){console.error(\"Delete error:\",error);}};const handleRetry=()=>fetchMessages();if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading messages...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"Messages Management\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-12 w-12 text-yellow-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-yellow-800\",children:\"Access Issue\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-yellow-700\",children:[/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-sm\",children:[\"Current admin role: \",currentAdminRole===0?'Super Admin':'Admin']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\",children:\"Try Again\"})})]})]})})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"Messages Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:fetchMessages,className:\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\",children:\"Refresh\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[messages.length,\" message\",messages.length!==1?\"s\":\"\"]})]}),messages.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-semibold text-gray-900 mb-2\",children:\"No messages yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No contact messages have been received yet.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:messages.map(message=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:message.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:message.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[message.status!==\"read\"&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\",children:\"New\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:new Date(message.created_at||message.sent_at||Date.now()).toLocaleDateString()})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 p-3 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 whitespace-pre-wrap\",children:message.message})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[message.status!==\"read\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMarkAsRead(message.id),className:\"text-cyan-600 hover:text-cyan-800 font-medium\",children:\"Mark as Read\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReply(message),className:\"text-green-600 hover:text-green-800 font-medium\",children:\"Reply via Email\"})]}),currentAdminRole===0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteMessage(message.id),className:\"text-red-600 hover:text-red-800 font-medium\",children:\"Delete\"})]})]},message.id))})]});};","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","logo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","activeTab","setActiveTab","loading","setLoading","currentAdminRole","setCurrentAdminRole","currentAdminName","setCurrentAdminName","stats","setStats","totalUsers","totalBookings","activeBookings","totalMessages","totalPartners","successMessage","setSuccessMessage","apiErrors","setApiErrors","loadFallbackAdminData","storedRole","localStorage","getItem","storedName","parseInt","fetchAdminProfile","token","console","error","response","fetch","method","headers","concat","ok","responseText","text","data","JSON","parse","parseError","adminRole","adminName","role","undefined","admin","name","email","setItem","toString","status","warn","profileError","fetchDashboardStats","statsData","formattedStats","users","total_users","bookings","total_bookings","active_bookings","messages","total_messages","partners","total_partners","timer","setTimeout","clearTimeout","getTabs","baseTabs","id","tabsWithAdmin","splice","className","children","Array","map","_","index","tabs","onClick","fill","viewBox","fillRule","d","clipRule","Object","keys","length","entries","_ref","endpoint","StatCard","title","value","icon","color","trend","tab","BookingsManagement","UsersManagement","AdminManagement","SuperAdminPayments","MessagesManagement","PartnersManagement","ComplimentNoteModal","_ref2","colorClasses","blue","green","purple","amber","indigo","bgColorClasses","toLocaleString","_ref3","payments","setPayments","updating","setUpdating","exporting","setExporting","lastUpdated","setLastUpdated","API_BASE","fetchPayments","showLoading","arguments","Error","Authorization","statusText","json","log","paymentsData","isArray","Date","prev","_objectSpread","message","interval","setInterval","clearInterval","updatePaymentStatus","bookingId","newStatus","updateKey","body","stringify","payment_status","responseData","replace","toUpperCase","prevPayments","payment","paymentData","getPaymentDisplayData","updatedPayment","booking","alert","handleExport","format","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","click","revokeObjectURL","getStatusColor","toLowerCase","getStatusText","formatDate","dateString","toLocaleDateString","year","month","day","e","calculateTotalGuests","adults","adultsCount","childrenCount","paymentStatus","booking_id","booking_details","guests","nationality","user","amount","payment_amount","roomType","room_type","userName","user_name","userEmail","user_email","phone","mpesa_phone","createdAt","created_at","checkIn","check_in","checkOut","check_out","toLocaleTimeString","disabled","updateKeyPending","updateKeyPartial","updateKeyFull","accommodations","setAccommodations","location","setLocation","contact","setContact","noteRef","handlePrint","printContents","current","innerHTML","printWindow","open","write","close","print","handleAddAccommodation","newItem","trim","ref","src","alt","unit","idx","type","placeholder","onKeyDown","key","target","onChange","_ref4","setPartners","editingPartner","setEditingPartner","showForm","setShowForm","fetchPartners","handleEdit","partner","handleDelete","partnerId","confirm","handleSubmit","formData","submitData","password","password_confirmation","result","_result$errors","errors","join","togglePartnerStatus","currentStatus","PartnerForm","onSubmit","onCancel","supplier_name","supplier_type","contact_person","mobile","city","colSpan","_ref5","setFormData","description","address","setErrors","handleChange","validateForm","newErrors","preventDefault","required","rows","_ref6","setBookings","editingBooking","setEditingBooking","nationalities","setNationalities","roomTypes","setRoomTypes","setError","fetchBookings","fetchNationalities","getFallbackNationalities","fetchRoomTypes","getFallbackRoomTypes","errorData","catch","requestData","user_id","successMsg","_result$errors2","errorMessage","handleRetry","stroke","strokeLinecap","strokeLinejoin","strokeWidth","BookingForm","_booking$user","_ref7","getTodayDate","today","toISOString","split","getMinCheckoutDate","checkInDate","nextDay","setDate","getDate","prevData","newData","minCheckout","min","max","_ref8","setUsers","fetchUsers","handleDeleteUser","userId","_ref9","admins","setAdmins","fetchAdmins","handleCreateAdmin","_result$errors3","handleDeleteAdmin","adminId","AdminForm","_ref0","emailRegex","test","minLength","_ref1","setMessages","fetchMessages","Accept","extracted","contact_messages","handleMarkAsRead","messageId","msg","handleReply","subject","encodeURIComponent","handleDeleteMessage","filter","sent_at","now"],"sources":["/root/southcoastwebmain/src/Components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport logo from \"./images/IMG-20251008-WA0008logo0.png\";\n\nexport default function AdminDashboard() {\n  const [activeTab, setActiveTab] = useState(\"bookings\");\n  const [loading, setLoading] = useState(true);\n  const [currentAdminRole, setCurrentAdminRole] = useState(1);\n  const [currentAdminName, setCurrentAdminName] = useState(\"Admin\");\n  const [stats, setStats] = useState({\n    totalUsers: 0,\n    totalBookings: 0,\n    activeBookings: 0,\n    totalMessages: 0,\n    totalPartners: 0,\n  });\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [apiErrors, setApiErrors] = useState({});\n\n  const loadFallbackAdminData = useCallback(() => {\n    const storedRole = localStorage.getItem(\"adminRole\") || 1;\n    const storedName = localStorage.getItem(\"adminName\") || localStorage.getItem(\"adminEmail\") || \"Admin\";\n    setCurrentAdminRole(parseInt(storedRole));\n    setCurrentAdminName(storedName);\n  }, []);\n\n  const fetchAdminProfile = useCallback(async () => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) {\n        console.error(\"No admin token found\");\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const response = await fetch(\"http://127.0.0.1:3000/api/v1/admin/profile\", {\n          method: \"GET\",\n          headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n        });\n\n        if (response.ok) {\n          const responseText = await response.text();\n          let data;\n\n          try {\n            data = JSON.parse(responseText);\n          } catch (parseError) {\n            console.error(\"JSON Parse Error:\", parseError);\n            loadFallbackAdminData();\n            return;\n          }\n\n          let adminRole = 1;\n          let adminName = \"Admin\";\n\n          if (data.role !== undefined) {\n            adminRole = parseInt(data.role);\n          } else if (data.data && data.data.role !== undefined) {\n            adminRole = parseInt(data.data.role);\n          } else if (data.admin && data.admin.role !== undefined) {\n            adminRole = parseInt(data.admin.role);\n          }\n\n          if (data.name) {\n            adminName = data.name;\n          } else if (data.data && data.data.name) {\n            adminName = data.data.name;\n          } else if (data.admin && data.admin.name) {\n            adminName = data.admin.name;\n          } else if (data.email) {\n            adminName = data.email;\n          } else if (data.data && data.data.email) {\n            adminName = data.data.email;\n          } else if (data.admin && data.admin.email) {\n            adminName = data.admin.email;\n          }\n\n          setCurrentAdminRole(adminRole);\n          setCurrentAdminName(adminName);\n          \n          localStorage.setItem(\"adminRole\", adminRole.toString());\n          localStorage.setItem(\"adminName\", adminName);\n        } else if (response.status === 404) {\n          console.warn(\"Profile endpoint not found, using fallback data\");\n          loadFallbackAdminData();\n        } else {\n          console.warn(\"Profile fetch failed with status:\", response.status);\n          loadFallbackAdminData();\n        }\n      } catch (profileError) {\n        console.error(\"Failed to fetch admin profile:\", profileError);\n        loadFallbackAdminData();\n      }\n    } catch (error) {\n      console.error(\"Error in fetchAdminProfile:\", error);\n      loadFallbackAdminData();\n    }\n  }, [loadFallbackAdminData]);\n\n  const fetchDashboardStats = useCallback(async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) {\n        console.error(\"No admin token found\");\n        setLoading(false);\n        return;\n      }\n\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/admin/stats\", {\n        method: \"GET\",\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        const responseText = await response.text();\n        let data;\n\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error(\"JSON Parse Error:\", parseError);\n          return;\n        }\n\n        let statsData = data;\n        \n        if (data.data) {\n          statsData = data.data;\n        }\n        \n        if (data.stats) {\n          statsData = data.stats;\n        }\n\n        const formattedStats = {\n          totalUsers: statsData.totalUsers || statsData.users || statsData.total_users || 0,\n          totalBookings: statsData.totalBookings || statsData.bookings || statsData.total_bookings || 0,\n          activeBookings: statsData.activeBookings || statsData.active_bookings || 0,\n          totalMessages: statsData.totalMessages || statsData.messages || statsData.total_messages || 0,\n          totalPartners: statsData.totalPartners || statsData.partners || statsData.total_partners || 0,\n        };\n\n        setStats(formattedStats);\n      } else {\n        console.warn(\"Stats fetch failed with status:\", response.status);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch stats:\", error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchAdminProfile();\n    fetchDashboardStats();\n  }, [fetchAdminProfile, fetchDashboardStats]);\n\n  useEffect(() => {\n    if (successMessage) {\n      const timer = setTimeout(() => {\n        setSuccessMessage(\"\");\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [successMessage]);\n\n  const getTabs = useCallback(() => {\n    const baseTabs = [\n      { id: \"bookings\", name: \"Bookings\" },\n      { id: \"users\", name: \"Users\" },\n      { id: \"messages\", name: \"Messages\" },\n      { id: \"partners\", name: \"Partners\" },\n      { id: \"complimentNote\", name: \"Compliment Note\" },\n    ];\n\n    if (currentAdminRole === 0) {\n      const tabsWithAdmin = [...baseTabs];\n      tabsWithAdmin.splice(2, 0, { id: \"admins\", name: \"Admins\" });\n      tabsWithAdmin.splice(3, 0, { id: \"payments\", name: \"Payments\" });\n      return tabsWithAdmin;\n    }\n\n    return baseTabs;\n  }, [currentAdminRole]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\n        <div className=\"bg-white shadow-lg border-b border-gray-200\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex justify-between items-center py-6\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg\"></div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Admin Dashboard</h1>\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"w-32 h-4 bg-gray-200 rounded animate-pulse\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\">\n            {[...Array(5)].map((_, index) => (\n              <div key={index} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse\">\n                <div className=\"flex items-center\">\n                  <div className=\"bg-gray-200 p-3 rounded-xl mr-4\">\n                    <div className=\"w-6 h-6 bg-gray-300 rounded\"></div>\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                    <div className=\"h-6 bg-gray-200 rounded w-1/2\"></div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8\">\n            <div className=\"animate-pulse\">\n              <div className=\"h-6 bg-gray-200 rounded w-1/4 mb-6\"></div>\n              <div className=\"space-y-3\">\n                <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n                <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\n                <div className=\"h-4 bg-gray-200 rounded w-4/6\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const tabs = getTabs();\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\n      {/* Header */}\n      <div className=\"bg-white shadow-lg border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-6\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-cyan-400 rounded-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold text-lg\">SC</span>\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Admin Dashboard</h1>\n                <p className=\"text-sm text-gray-500 mt-1\">Southcoast Outdoors Management</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-gray-900\">Welcome, {currentAdminName}</p>\n                <p className=\"text-xs text-gray-500\">\n                  {currentAdminRole === 0 ? \"Super Administrator\" : \"Administrator\"}\n                </p>\n              </div>\n              <button \n                onClick={() => {\n                  fetchAdminProfile();\n                  fetchDashboardStats();\n                }}\n                className=\"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5\"\n              >\n                â†» Refresh Data\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Alert Messages */}\n        {successMessage && (\n          <div className=\"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl shadow-sm\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"font-semibold text-green-800\">{successMessage}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {Object.keys(apiErrors).length > 0 && (\n          <div className=\"mb-6 p-4 bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-xl shadow-sm\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"font-semibold text-red-800\">API Errors Detected</p>\n                <div className=\"mt-2 space-y-1\">\n                  {Object.entries(apiErrors).map(([endpoint, error]) => (\n                    <p key={endpoint} className=\"text-sm text-red-700\">\n                      <span className=\"font-medium\">{endpoint}:</span> {error}\n                    </p>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\">\n          <StatCard\n            title=\"Total Users\"\n            value={stats.totalUsers}\n            icon=\"ðŸ‘¥\"\n            color=\"blue\"\n            trend=\"+12%\"\n          />\n          <StatCard\n            title=\"Total Bookings\"\n            value={stats.totalBookings}\n            icon=\"ðŸ“…\"\n            color=\"green\"\n            trend=\"+8%\"\n          />\n          <StatCard\n            title=\"Active Bookings\"\n            value={stats.activeBookings}\n            icon=\"ðŸ¨\"\n            color=\"purple\"\n            trend=\"+5%\"\n          />\n          <StatCard\n            title=\"Messages\"\n            value={stats.totalMessages}\n            icon=\"ðŸ’¬\"\n            color=\"amber\"\n            trend=\"+23%\"\n          />\n          <StatCard\n            title=\"Total Partners\"\n            value={stats.totalPartners}\n            icon=\"ðŸ¤\"\n            color=\"indigo\"\n            trend=\"+3%\"\n          />\n        </div>\n\n        {/* Main Content Panel */}\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden\">\n          {/* Tab Navigation */}\n          <div className=\"border-b border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100\">\n            <nav className=\"flex overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100\">\n              {tabs.map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`flex-shrink-0 py-5 px-6 text-sm font-semibold border-b-2 transition-all duration-200 whitespace-nowrap ${\n                    activeTab === tab.id\n                      ? \"border-blue-500 text-blue-600 bg-white shadow-sm\"\n                      : \"border-transparent text-gray-600 hover:text-gray-900 hover:bg-white hover:bg-opacity-50\"\n                  }`}\n                >\n                  {tab.name}\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Tab Content */}\n          <div className=\"p-6 sm:p-8\">\n            {activeTab === \"bookings\" && <BookingsManagement currentAdminRole={currentAdminRole} setSuccessMessage={setSuccessMessage} setApiErrors={setApiErrors} />}\n            {activeTab === \"users\" && <UsersManagement currentAdminRole={currentAdminRole} setApiErrors={setApiErrors} />}\n            {activeTab === \"admins\" && currentAdminRole === 0 && <AdminManagement currentAdminRole={currentAdminRole} setApiErrors={setApiErrors} />}\n            {activeTab === \"payments\" && currentAdminRole === 0 && <SuperAdminPayments currentAdminRole={currentAdminRole} setApiErrors={setApiErrors} />}\n            {activeTab === \"messages\" && <MessagesManagement currentAdminRole={currentAdminRole} setApiErrors={setApiErrors} />}\n            {activeTab === \"partners\" && <PartnersManagement currentAdminRole={currentAdminRole} setApiErrors={setApiErrors} />}\n            {activeTab === \"complimentNote\" && <ComplimentNoteModal />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst StatCard = ({ title, value, icon, color, trend }) => {\n  const colorClasses = {\n    blue: \"from-blue-500 to-cyan-500\",\n    green: \"from-green-500 to-emerald-500\",\n    purple: \"from-purple-500 to-violet-500\",\n    amber: \"from-amber-500 to-orange-500\",\n    indigo: \"from-indigo-500 to-blue-500\",\n  };\n\n  const bgColorClasses = {\n    blue: \"bg-blue-50 border-blue-100\",\n    green: \"bg-green-50 border-green-100\",\n    purple: \"bg-purple-50 border-purple-100\",\n    amber: \"bg-amber-50 border-amber-100\",\n    indigo: \"bg-indigo-50 border-indigo-100\",\n  };\n\n  return (\n    <div className={`rounded-2xl border-2 ${bgColorClasses[color]} p-6 transition-all duration-300 hover:shadow-lg hover:scale-105`}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"text-sm font-medium text-gray-600 mb-2\">{title}</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{value.toLocaleString()}</p>\n          {trend && (\n            <p className=\"text-xs font-medium text-green-600 mt-2\">\n              â†‘ {trend} from last month\n            </p>\n          )}\n        </div>\n        <div className={`w-14 h-14 rounded-xl bg-gradient-to-r ${colorClasses[color]} flex items-center justify-center shadow-md`}>\n          <span className=\"text-2xl text-white\">{icon}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst SuperAdminPayments = ({ currentAdminRole, setApiErrors }) => { \n  const [payments, setPayments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [updating, setUpdating] = useState({});\n  const [exporting, setExporting] = useState(false);\n  const [lastUpdated, setLastUpdated] = useState(null);\n\n  const API_BASE = \"http://127.0.0.1:3000/api/v1/admin\";\n\n  // Enhanced fetchPayments with proper state management\n  const fetchPayments = useCallback(async (showLoading = true) => {\n    try {\n      if (showLoading) setLoading(true);\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) {\n        throw new Error(\"Authentication required\");\n      }\n\n      const response = await fetch(`${API_BASE}/payments`, {\n        headers: { \n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}` \n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.log(\"Fetched payments data:\", data);\n      \n      const paymentsData = data.payments || data || [];\n      setPayments(Array.isArray(paymentsData) ? paymentsData : []);\n      setLastUpdated(new Date());\n      \n    } catch (error) {\n      console.error(\"Error fetching payments:\", error);\n      setApiErrors(prev => ({ \n        ...prev, \n        payments: error.message || \"Failed to load payments\" \n      }));\n    } finally {\n      if (showLoading) setLoading(false);\n    }\n  }, [setApiErrors]);\n\n  useEffect(() => {\n    fetchPayments();\n  }, [fetchPayments]);\n\n  // Optimized polling - only refresh when needed\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // Only auto-refresh if not currently updating anything\n      if (Object.keys(updating).length === 0) {\n        fetchPayments(false); // Silent refresh without loading indicator\n      }\n    }, 10000); // Reduced to 10 seconds for better real-time updates\n\n    return () => clearInterval(interval);\n  }, [fetchPayments, updating]);\n\n  // FIXED: updatePaymentStatus that properly updates both admin and user sides\n  const updatePaymentStatus = async (bookingId, newStatus) => {\n    const updateKey = `${bookingId}_${newStatus}`;\n    \n    if (updating[updateKey]) return;\n    \n    setUpdating(prev => ({ ...prev, [updateKey]: true }));\n\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) {\n        throw new Error(\"Authentication required\");\n      }\n      \n      console.log(\"Updating booking:\", bookingId, \"to status:\", newStatus);\n      \n      const response = await fetch(`${API_BASE}/bookings/${bookingId}/payment_status`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ \n          payment_status: newStatus\n        }),\n      });\n\n      const responseData = await response.json();\n      console.log(\"Update response:\", responseData);\n\n      if (response.ok) {\n        const statusText = newStatus.replace('_', ' ').toUpperCase();\n        \n        // FIX: Update local state immediately for better UX\n        setPayments(prevPayments => \n          prevPayments.map(payment => {\n            const paymentData = getPaymentDisplayData(payment);\n            if (paymentData.bookingId == bookingId) {\n              // Create a deep copy and update payment_status at all levels\n              const updatedPayment = JSON.parse(JSON.stringify(payment));\n              \n              // Update payment_status at root level\n              updatedPayment.payment_status = newStatus;\n              updatedPayment.status = newStatus;\n              \n              // Update payment_status in nested booking object if it exists\n              if (updatedPayment.booking) {\n                updatedPayment.booking.payment_status = newStatus;\n              }\n              \n              return updatedPayment;\n            }\n            return payment;\n          })\n        );\n        \n        setLastUpdated(new Date());\n        alert(`âœ… Payment status updated to: ${statusText}`);\n        \n        // Force a refresh to ensure backend consistency\n        setTimeout(() => fetchPayments(false), 1000);\n        \n      } else {\n        throw new Error(responseData.error || responseData.message || \"Failed to update payment status\");\n      }\n    } catch (error) {\n      console.error(\"Error updating payment status:\", error);\n      alert(`âŒ ${error.message || \"Failed to update payment status\"}`);\n      \n      // Revert by refetching actual data\n      fetchPayments(false);\n    } finally {\n      setUpdating(prev => ({ ...prev, [updateKey]: false }));\n    }\n  };\n\n  const handleExport = async (format) => {\n    setExporting(true);\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(`${API_BASE}/payments/export?format=${format}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!response.ok) throw new Error(`Export failed: HTTP ${response.status}`);\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = `payments_report.${format}`;\n      link.click();\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error(\"Export error:\", error);\n      alert(\"Failed to export payments\");\n    } finally {\n      setExporting(false);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    if (!status) return 'bg-gray-100 text-gray-800 border border-gray-300';\n    \n    switch (status.toLowerCase()) {\n      case 'pending': return 'bg-amber-100 text-amber-800 border border-amber-300';\n      case 'partial_paid': return 'bg-blue-100 text-blue-800 border border-blue-300';\n      case 'payment_made': return 'bg-emerald-100 text-emerald-800 border border-emerald-300';\n      default: return 'bg-gray-100 text-gray-800 border border-gray-300';\n    }\n  };\n\n  const getStatusText = (status) => {\n    if (!status) return 'â“ NO STATUS';\n    \n    switch (status.toLowerCase()) {\n      case 'pending': return 'â³ WAITING FOR ADMIN CONFIRMATION';\n      case 'partial_paid': return 'ðŸ’° PARTIAL PAID';\n      case 'payment_made': return 'âœ… FULLY PAID';\n      default: return `â“ ${status.toUpperCase()}`;\n    }\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'N/A';\n    try {\n      return new Date(dateString).toLocaleDateString(\"en-US\", { \n        year: \"numeric\", \n        month: \"short\", \n        day: \"numeric\" \n      });\n    } catch (e) {\n      return 'Invalid Date';\n    }\n  };\n\n  const calculateTotalGuests = (adults, children) => {\n    const adultsCount = parseInt(adults) || 0;\n    const childrenCount = parseInt(children) || 0;\n    return adultsCount + childrenCount;\n  };\n\n  // FIXED: Enhanced getPaymentDisplayData to properly extract all data\n  const getPaymentDisplayData = (payment) => {\n    console.log(\"Raw payment data for debugging:\", payment);\n    \n    // FIX: Better payment status extraction\n    const paymentStatus = \n      payment.payment_status || \n      payment.status || \n      (payment.booking && payment.booking.payment_status) ||\n      'pending'; // Default to pending if not found\n    \n    const bookingId = \n      payment.booking_id || \n      payment.bookingId ||\n      (payment.booking && payment.booking.id) ||\n      payment.id;\n\n    // FIX: Enhanced data extraction with multiple fallbacks\n    const adults = \n      payment.adults || \n      (payment.booking && payment.booking.adults) || \n      (payment.booking_details && payment.booking_details.adults) ||\n      (payment.guests && payment.guests.adults) ||\n      1; // Default to 1 adult\n    \n    const children = \n      payment.children || \n      (payment.booking && payment.booking.children) || \n      (payment.booking_details && payment.booking_details.children) ||\n      (payment.guests && payment.guests.children) ||\n      0;\n    \n    const nationality = \n      payment.nationality || \n      (payment.booking && payment.booking.nationality) || \n      (payment.booking_details && payment.booking_details.nationality) ||\n      (payment.user && payment.user.nationality) ||\n      'Not specified';\n\n    const amount = \n      payment.amount || \n      payment.payment_amount || \n      (payment.booking && payment.booking.payment_amount) ||\n      (payment.booking && payment.booking.amount) ||\n      'N/A';\n\n    return {\n      id: payment.id || 'N/A',\n      bookingId: bookingId,\n      roomType: payment.room_type || payment.roomType || (payment.booking && payment.booking.room_type) || 'Unknown Room',\n      userName: payment.user_name || payment.userName || (payment.user && payment.user.name) || 'N/A',\n      userEmail: payment.user_email || payment.userEmail || (payment.user && payment.user.email) || 'N/A',\n      phone: payment.phone || payment.mpesa_phone || (payment.booking && payment.booking.mpesa_phone) || 'N/A',\n      createdAt: payment.created_at || payment.createdAt,\n      checkIn: payment.check_in || payment.checkIn || (payment.booking && payment.booking.check_in),\n      checkOut: payment.check_out || payment.checkOut || (payment.booking && payment.booking.check_out),\n      adults: adults,\n      children: children,\n      nationality: nationality,\n      amount: amount,\n      paymentStatus: paymentStatus\n    };\n  };\n\n  if (loading) return (\n    <div className=\"text-center py-12\">\n      <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n      <p className=\"text-gray-600 font-medium\">Loading payment data...</p>\n      <p className=\"text-sm text-gray-500 mt-2\">Please wait while we fetch the latest information</p>\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-2\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Payment Management</h2>\n          <p className=\"text-gray-600 mt-1\">Manage and confirm user payments</p>\n          <p className=\"text-xs text-blue-600 mt-1\">\n            ðŸ”„ Auto-refreshes every 10 seconds â€¢ \n            Last updated: {lastUpdated ? lastUpdated.toLocaleTimeString() : 'Never'}\n          </p>\n        </div>\n        <div className=\"flex flex-wrap gap-3\">\n          <button\n            onClick={() => fetchPayments(true)}\n            className=\"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg\"\n          >\n            â†» Refresh Data\n          </button>\n          <button\n            onClick={() => handleExport('csv')}\n            disabled={exporting}\n            className=\"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {exporting ? 'ðŸ“¤ Exporting...' : 'ðŸ“Š Export CSV'}\n          </button>\n          <button\n            onClick={() => handleExport('pdf')}\n            disabled={exporting}\n            className=\"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {exporting ? 'ðŸ“¤ Exporting...' : 'ðŸ“„ Export PDF'}\n          </button>\n        </div>\n      </div>\n\n      {/* Payments List */}\n      {payments.length === 0 ? (\n        <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl border-2 border-dashed border-gray-300 p-12 text-center\">\n          <div className=\"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6\">\n            <span className=\"text-3xl\">ðŸ’¸</span>\n          </div>\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No payments yet</h3>\n          <p className=\"text-gray-500 max-w-md mx-auto\">\n            No payments have been initiated yet. Payments will appear here once users start making bookings and payments.\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {payments.map((payment) => {\n            const paymentData = getPaymentDisplayData(payment);\n            const updateKeyPending = `${paymentData.bookingId}_pending`;\n            const updateKeyPartial = `${paymentData.bookingId}_partial_paid`;\n            const updateKeyFull = `${paymentData.bookingId}_payment_made`;\n            \n            return (\n              <div key={paymentData.id} className=\"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-xl\">\n                <div className=\"p-8\">\n                  <div className=\"flex flex-col xl:flex-row xl:items-start xl:justify-between gap-8\">\n                    {/* Payment Details */}\n                    <div className=\"flex-1 space-y-6\">\n                      {/* Header */}\n                      <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-3\">\n                            <h3 className=\"text-xl font-bold text-gray-900\">\n                              Booking #{paymentData.bookingId}\n                            </h3>\n                            <span className={`${getStatusColor(paymentData.paymentStatus)} text-xs font-bold px-3 py-1.5 rounded-full`}>\n                              {getStatusText(paymentData.paymentStatus)}\n                            </span>\n                          </div>\n                          <p className=\"text-lg font-semibold text-blue-600 mb-2\">\n                            {paymentData.roomType}\n                          </p>\n                          <div className=\"flex flex-wrap gap-4 text-sm text-gray-600\">\n                            <span className=\"flex items-center gap-1\">\n                              <span className=\"w-2 h-2 bg-gray-400 rounded-full\"></span>\n                              User: {paymentData.userName}\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <span className=\"w-2 h-2 bg-gray-400 rounded-full\"></span>\n                              Email: {paymentData.userEmail}\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <span className=\"w-2 h-2 bg-gray-400 rounded-full\"></span>\n                              Phone: {paymentData.phone}\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <span className=\"w-2 h-2 bg-gray-400 rounded-full\"></span>\n                              Created: {formatDate(paymentData.createdAt)}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Booking Details Grid */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                        <div className=\"bg-gray-50 rounded-xl p-4 border border-gray-200\">\n                          <p className=\"text-sm font-medium text-gray-600 mb-1\">Check-in</p>\n                          <p className=\"text-lg font-semibold text-gray-900\">{formatDate(paymentData.checkIn)}</p>\n                        </div>\n                        <div className=\"bg-gray-50 rounded-xl p-4 border border-gray-200\">\n                          <p className=\"text-sm font-medium text-gray-600 mb-1\">Check-out</p>\n                          <p className=\"text-lg font-semibold text-gray-900\">{formatDate(paymentData.checkOut)}</p>\n                        </div>\n                        <div className=\"bg-gray-50 rounded-xl p-4 border border-gray-200\">\n                          <p className=\"text-sm font-medium text-gray-600 mb-1\">Total Guests</p>\n                          <p className=\"text-lg font-semibold text-gray-900\">\n                            {calculateTotalGuests(paymentData.adults, paymentData.children)}\n                            {paymentData.adults > 0 && (\n                              <span className=\"text-sm text-gray-500 block mt-1\">\n                                ({paymentData.adults} adults, {paymentData.children} children)\n                              </span>\n                            )}\n                          </p>\n                        </div>\n                        <div className=\"bg-gray-50 rounded-xl p-4 border border-gray-200\">\n                          <p className=\"text-sm font-medium text-gray-600 mb-1\">Nationality</p>\n                          <p className=\"text-lg font-semibold text-gray-900\">{paymentData.nationality}</p>\n                        </div>\n                      </div>\n\n                      {/* Payment Information */}\n                      <div className=\"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-200\">\n                        <h4 className=\"font-bold text-gray-900 mb-4 text-lg\">Payment Details</h4>\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                          <div>\n                            <p className=\"text-sm font-medium text-gray-600 mb-2\">Amount</p>\n                            <p className=\"text-2xl font-bold text-green-600\">KES {paymentData.amount || 'N/A'}</p>\n                          </div>\n                          <div>\n                            <p className=\"text-sm font-medium text-gray-600 mb-2\">M-Pesa Phone</p>\n                            <p className=\"text-lg font-mono font-semibold text-gray-900\">{paymentData.phone || 'N/A'}</p>\n                          </div>\n                          <div>\n                            <p className=\"text-sm font-medium text-gray-600 mb-2\">Current Status</p>\n                            <p className={`text-lg font-bold ${\n                              paymentData.paymentStatus === 'pending' ? 'text-amber-600' : \n                              paymentData.paymentStatus === 'partial_paid' ? 'text-blue-600' : \n                              paymentData.paymentStatus === 'payment_made' ? 'text-emerald-600' : \n                              'text-gray-600'\n                            }`}>\n                              {getStatusText(paymentData.paymentStatus)}\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Action Buttons */}\n                    <div className=\"xl:w-80 flex-shrink-0\">\n                      <div className=\"bg-gray-50 rounded-xl p-6 border border-gray-200\">\n                        <h4 className=\"font-bold text-gray-900 text-sm uppercase tracking-wider mb-4\">Update Payment Status</h4>\n                        <p className=\"text-xs text-gray-500 mb-4 text-center\">\n                          This will update both admin and user views\n                        </p>\n                        <div className=\"space-y-3\">\n                          <button\n                            onClick={() => updatePaymentStatus(paymentData.bookingId, 'pending')}\n                            disabled={updating[updateKeyPending] || paymentData.paymentStatus === 'pending'}\n                            className={`w-full px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\n                              paymentData.paymentStatus === 'pending'\n                                ? 'bg-amber-500 text-white cursor-not-allowed border-2 border-amber-600 shadow-inner'\n                                : 'bg-amber-100 text-amber-800 hover:bg-amber-200 border border-amber-300 hover:shadow-md'\n                            }`}\n                          >\n                            {updating[updateKeyPending] ? 'â³ Updating...' : 'â³ Set as Pending'}\n                          </button>\n                          \n                          <button\n                            onClick={() => updatePaymentStatus(paymentData.bookingId, 'partial_paid')}\n                            disabled={updating[updateKeyPartial] || paymentData.paymentStatus === 'partial_paid'}\n                            className={`w-full px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\n                              paymentData.paymentStatus === 'partial_paid'\n                                ? 'bg-blue-500 text-white cursor-not-allowed border-2 border-blue-600 shadow-inner'\n                                : 'bg-blue-100 text-blue-800 hover:bg-blue-200 border border-blue-300 hover:shadow-md'\n                            }`}\n                          >\n                            {updating[updateKeyPartial] ? 'ðŸ”„ Updating...' : 'ðŸ’° Set as Partial Paid'}\n                          </button>\n                          \n                          <button\n                            onClick={() => updatePaymentStatus(paymentData.bookingId, 'payment_made')}\n                            disabled={updating[updateKeyFull] || paymentData.paymentStatus === 'payment_made'}\n                            className={`w-full px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\n                              paymentData.paymentStatus === 'payment_made'\n                                ? 'bg-emerald-500 text-white cursor-not-allowed border-2 border-emerald-600 shadow-inner'\n                                : 'bg-emerald-100 text-emerald-800 hover:bg-emerald-200 border border-emerald-300 hover:shadow-md'\n                            }`}\n                          >\n                            {updating[updateKeyFull] ? 'ðŸ”„ Updating...' : 'âœ… Set as Fully Paid'}\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// ... (rest of the components - ComplimentNoteModal, PartnersManagement, PartnerForm, BookingsManagement, BookingForm, UsersManagement, AdminManagement, AdminForm, MessagesManagement)\n// Each of these would receive similar professional styling updates\n\nconst ComplimentNoteModal = () => {\n  const [accommodations, setAccommodations] = useState([\n    \"Executive Room, Ensuite\",\n    \"2-Connected Room, 1 Ensuite\",\n    \"2 Bedroom Apartment - Living + Kitchen + 1 Ensuite\",\n    \"3-BedRoom Apartment-Kitchen, 2 Ensuite\",\n    \"ExecutiveRoom, Ensuite\",\n    \"2-Connected Room, I-Ensuite\",\n    \"2-BedRoom Apartment with Kitchen, 1-Ensuite\",\n    \"Larger Apartment with Kitchen, Balcony, Living, 2 Ensuites\"\n  ]);\n  const [location, setLocation] = useState(\"South Coast, Kenya â€” Near Diani Beach\");\n  const [contact, setContact] = useState({\n    phone: \"+254 7XX XXX XXX\",\n    email: \"info@southcoastoutdoors.co.ke\",\n  });\n\n  const noteRef = useRef();\n\n  const handlePrint = () => {\n    const printContents = noteRef.current.innerHTML;\n    const printWindow = window.open(\"\", \"\", \"width=600,height=800\");\n    printWindow.document.write(`\n      <html>\n        <head>\n          <title>Southcoast Outdoors With Compliments</title>\n          <style>\n            body {\n              font-family: 'Inter', sans-serif;\n              padding: 32px;\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              min-height: 100vh;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n            }\n            .note-container {\n              border: 2px solid #e2e8f0;\n              border-radius: 20px;\n              padding: 32px;\n              width: 100%;\n              max-width: 520px;\n              margin: auto;\n              box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n              background: white;\n              position: relative;\n              overflow: hidden;\n            }\n            .note-container::before {\n              content: '';\n              position: absolute;\n              top: 0;\n              left: 0;\n              right: 0;\n              height: 4px;\n              background: linear-gradient(90deg, #667eea, #764ba2);\n            }\n            .header {\n              display: flex;\n              align-items: center;\n              gap: 16px;\n              border-bottom: 2px solid #f1f5f9;\n              padding-bottom: 16px;\n              margin-bottom: 20px;\n            }\n            .header img {\n              width: 70px;\n              height: 70px;\n              border-radius: 16px;\n              border: 2px solid #e2e8f0;\n            }\n            .header h1 {\n              font-size: 1.5rem;\n              font-weight: 700;\n              color: #1e293b;\n              margin: 0;\n              line-height: 1.3;\n            }\n            .header span {\n              font-size: 0.95rem;\n              color: #64748b;\n              font-weight: 500;\n            }\n            .section {\n              margin-top: 1.5rem;\n            }\n            .section h2 {\n              font-size: 1.1rem;\n              font-weight: 600;\n              color: #334155;\n              margin-bottom: 8px;\n              border-bottom: 2px solid #f1f5f9;\n              display: inline-block;\n              padding-bottom: 4px;\n            }\n            .section p {\n              margin: 6px 0;\n              font-size: 0.95rem;\n              color: #475569;\n              line-height: 1.5;\n            }\n            footer {\n              margin-top: 2rem;\n              text-align: center;\n              font-size: 0.85rem;\n              color: #64748b;\n              border-top: 2px solid #f1f5f9;\n              padding-top: 12px;\n              font-style: italic;\n            }\n          </style>\n        </head>\n        <body>${printContents}</body>\n      </html>\n    `);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const handleAddAccommodation = (newItem) => {\n    if (newItem.trim()) setAccommodations([...accommodations, newItem]);\n  };\n\n  return (\n    <div className=\"font-inter\">\n      <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-8\">\n        {/* Preview Card */}\n        <div\n          ref={noteRef}\n          className=\"note-container bg-white rounded-2xl border-2 border-gray-200 p-6 sm:p-8 shadow-xl relative overflow-hidden\"\n        >\n          <div className=\"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-blue-500 to-purple-600\"></div>\n          <div className=\"header flex items-center gap-5 mb-6 pb-6 border-b border-gray-200\">\n            <img src={logo} alt=\"Southcoast Outdoors Logo\" className=\"w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 border-gray-200\" />\n            <div>\n              <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900 leading-tight\">\n                Southcoast Outdoors\n              </h1>\n              <span className=\"text-gray-600 text-sm font-medium\">With Compliments</span>\n            </div>\n          </div>\n\n          <div className=\"section mb-6\">\n            <h2 className=\"text-gray-800 font-semibold text-lg mb-4 pb-2 border-b-2 border-blue-100\">Our Accommodations</h2>\n            <div className=\"space-y-2\">\n              {accommodations.map((unit, idx) => (\n                <p key={idx} className=\"text-gray-700 text-base flex items-start\">\n                  <span className=\"text-blue-500 mr-3\">â€¢</span>\n                  {unit}\n                </p>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"section mb-6\">\n            <h2 className=\"text-gray-800 font-semibold text-lg mb-3 pb-2 border-b-2 border-blue-100\">Our Location</h2>\n            <p className=\"text-gray-700 text-base\">{location}</p>\n          </div>\n\n          <div className=\"section mb-6\">\n            <h2 className=\"text-gray-800 font-semibold text-lg mb-3 pb-2 border-b-2 border-blue-100\">Contact Us</h2>\n            <p className=\"text-gray-700 text-base\">ðŸ“ž Tel: {contact.phone}</p>\n            <p className=\"text-gray-700 text-base\">âœ‰ï¸ Email: {contact.email}</p>\n          </div>\n\n          <footer className=\"text-center text-gray-500 text-sm border-t border-gray-200 pt-6 mt-8\">\n            Thank you for choosing Southcoast Outdoors\n          </footer>\n        </div>\n\n        {/* Edit Form */}\n        <div className=\"space-y-6\">\n          <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200\">\n            <h3 className=\"text-blue-900 font-bold text-xl mb-2\">Edit Note Details</h3>\n            <p className=\"text-blue-700 text-sm\">Customize your compliment note template</p>\n          </div>\n\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Add Accommodation</label>\n              <input\n                type=\"text\"\n                placeholder=\"e.g. Family Villas, Luxury Suite...\"\n                className=\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\"\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    handleAddAccommodation(e.target.value);\n                    e.target.value = \"\";\n                  }\n                }}\n              />\n              <p className=\"text-xs text-gray-500 mt-2\">Press Enter to add new accommodation</p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Location</label>\n              <input\n                type=\"text\"\n                className=\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\"\n                value={location}\n                onChange={(e) => setLocation(e.target.value)}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Phone</label>\n                <input\n                  type=\"text\"\n                  className=\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\"\n                  value={contact.phone}\n                  onChange={(e) => setContact({ ...contact, phone: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Email</label>\n                <input\n                  type=\"email\"\n                  className=\"border-2 border-gray-300 rounded-xl w-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\"\n                  value={contact.email}\n                  onChange={(e) => setContact({ ...contact, email: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <button\n              onClick={handlePrint}\n              className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n            >\n              ðŸ–¨ï¸ Print Compliment Note\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst PartnersManagement = ({ currentAdminRole, setApiErrors }) => {\n  const [partners, setPartners] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingPartner, setEditingPartner] = useState(null);\n  const [showForm, setShowForm] = useState(false);\n\n  const fetchPartners = useCallback(async () => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) {\n        console.error(\"No admin token found\");\n        setLoading(false);\n        return;\n      }\n\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/admin/partners\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        const responseText = await response.text();\n        let data;\n\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error(\"JSON Parse Error:\", parseError);\n          setPartners([]);\n          return;\n        }\n        \n        setPartners(data);\n      } else {\n        console.error(\"Failed to fetch partners:\", response.status);\n        setApiErrors(prev => ({ ...prev, partners: `HTTP ${response.status}` }));\n      }\n    } catch (error) {\n      console.error(\"Error fetching partners:\", error);\n      setApiErrors(prev => ({ ...prev, partners: error.message }));\n    } finally {\n      setLoading(false);\n    }\n  }, [setApiErrors]);\n\n  useEffect(() => {\n    fetchPartners();\n  }, [fetchPartners]);\n\n  const handleEdit = (partner) => {\n    if (currentAdminRole === 0 || partner.status !== \"active\") {\n      setEditingPartner(partner);\n      setShowForm(true);\n    } else {\n      alert(\"You don't have permission to edit active partners. Only Super Admin can edit active partners.\");\n    }\n  };\n\n  const handleDelete = async (partnerId) => {\n    if (currentAdminRole !== 0) {\n      alert(\"Only Super Admin can delete partners.\");\n      return;\n    }\n\n    if (!window.confirm(\"Are you sure you want to delete this partner?\")) return;\n\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(`http://127.0.0.1:3000/api/v1/admin/partners/${partnerId}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        alert(\"Partner deleted successfully!\");\n        fetchPartners();\n      } else {\n        alert(\"Failed to delete partner\");\n      }\n    } catch (error) {\n      console.error(\"Error deleting partner:\", error);\n      alert(\"Failed to delete partner\");\n    }\n  };\n\n  const handleSubmit = async (formData) => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const url = editingPartner\n        ? `http://127.0.0.1:3000/api/v1/admin/partners/${editingPartner.id}`\n        : \"http://127.0.0.1:3000/api/v1/admin/partners\";\n\n      const method = editingPartner ? \"PUT\" : \"POST\";\n      \n      const submitData = { ...formData };\n      if (editingPartner) {\n        if (!submitData.password) {\n          delete submitData.password;\n          delete submitData.password_confirmation;\n        }\n      }\n\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify({ partner: submitData }),\n      });\n\n      const responseText = await response.text();\n      let result;\n\n      try {\n        result = JSON.parse(responseText);\n      } catch (parseError) {\n        console.error(\"JSON Parse Error:\", parseError);\n        throw new Error(\"Server returned an invalid response.\");\n      }\n\n      if (response.ok) {\n        alert(`Partner ${editingPartner ? 'updated' : 'created'} successfully!`);\n        setShowForm(false);\n        setEditingPartner(null);\n        fetchPartners();\n      } else {\n        throw new Error(result.errors?.join(', ') || result.error || 'Failed to save partner');\n      }\n    } catch (error) {\n      console.error(\"Error saving partner:\", error);\n      alert(`Failed to save partner: ${error.message}`);\n    }\n  };\n\n  const togglePartnerStatus = async (partnerId, currentStatus) => {\n    if (currentAdminRole !== 0) {\n      alert(\"Only Super Admin can change partner status.\");\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(`http://127.0.0.1:3000/api/v1/admin/partners/${partnerId}/toggle_status`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        alert(\"Partner status updated successfully!\");\n        fetchPartners();\n      } else {\n        alert(\"Failed to update partner status\");\n      }\n    } catch (error) {\n      console.error(\"Error updating partner status:\", error);\n      alert(\"Failed to update partner status\");\n    }\n  };\n\n  if (loading) return <div className=\"text-center py-8\">Loading partners...</div>;\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">Partners Management</h2>\n        <button\n          onClick={() => setShowForm(true)}\n          className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\"\n        >\n          Add New Partner\n        </button>\n      </div>\n\n      {showForm && (\n        <PartnerForm\n          partner={editingPartner}\n          onSubmit={handleSubmit}\n          onCancel={() => {\n            setShowForm(false);\n            setEditingPartner(null);\n          }}\n          currentAdminRole={currentAdminRole}\n        />\n      )}\n\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                ID\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Supplier Name\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Type\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Contact Person\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Email\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Mobile\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                City\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Status\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Created At\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {partners.length > 0 ? partners.map((partner) => (\n              <tr key={partner.id}>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                  #{partner.id}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium\">\n                  {partner.supplier_name}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800\">\n                    {partner.supplier_type}\n                  </span>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {partner.contact_person}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {partner.email}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {partner.mobile}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {partner.city}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                    partner.status === 'active' ? 'bg-green-100 text-green-800' : \n                    partner.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'\n                  }`}>\n                    {partner.status}\n                  </span>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {new Date(partner.created_at).toLocaleDateString()}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                  <button\n                    onClick={() => handleEdit(partner)}\n                    className=\"text-cyan-600 hover:text-cyan-900\"\n                    disabled={currentAdminRole !== 0 && partner.status === \"active\"}\n                  >\n                    Edit\n                  </button>\n                  {currentAdminRole === 0 && (\n                    <>\n                      <button\n                        onClick={() => togglePartnerStatus(partner.id, partner.status)}\n                        className={`${\n                          partner.status === 'active' ? 'text-orange-600 hover:text-orange-900' : 'text-green-600 hover:text-green-900'\n                        }`}\n                      >\n                        {partner.status === 'active' ? 'Deactivate' : 'Activate'}\n                      </button>\n                      <button\n                        onClick={() => handleDelete(partner.id)}\n                        className=\"text-red-600 hover:text-red-900\"\n                      >\n                        Delete\n                      </button>\n                    </>\n                  )}\n                </td>\n              </tr>\n            )) : (\n              <tr>\n                <td colSpan=\"10\" className=\"px-4 py-4 text-center text-sm text-gray-500\">\n                  No partners found\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nconst PartnerForm = ({ partner, onSubmit, onCancel, currentAdminRole }) => {\n  const [formData, setFormData] = useState({\n    supplier_type: partner?.supplier_type || \"\",\n    supplier_name: partner?.supplier_name || \"\",\n    mobile: partner?.mobile || \"\",\n    email: partner?.email || \"\",\n    contact_person: partner?.contact_person || \"\",\n    password: \"\",\n    password_confirmation: \"\",\n    description: partner?.description || \"\",\n    city: partner?.city || \"\",\n    address: partner?.address || \"\",\n    status: partner?.status || \"pending\",\n  });\n\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n    if (errors[name]) {\n      setErrors({\n        ...errors,\n        [name]: '',\n      });\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.supplier_type) newErrors.supplier_type = 'Supplier type is required';\n    if (!formData.supplier_name) newErrors.supplier_name = 'Supplier name is required';\n    if (!formData.email) newErrors.email = 'Email is required';\n    if (!formData.contact_person) newErrors.contact_person = 'Contact person is required';\n    if (!formData.mobile) newErrors.mobile = 'Mobile number is required';\n    if (!formData.city) newErrors.city = 'City is required';\n    if (!formData.address) newErrors.address = 'Address is required';\n\n    if (!partner) {\n      if (!formData.password) newErrors.password = 'Password is required';\n      if (formData.password.length < 6) newErrors.password = 'Password must be at least 6 characters';\n      if (formData.password !== formData.password_confirmation) {\n        newErrors.password_confirmation = 'Passwords do not match';\n      }\n    } else {\n      if (formData.password && formData.password.length < 6) {\n        newErrors.password = 'Password must be at least 6 characters';\n      }\n      if (formData.password && formData.password !== formData.password_confirmation) {\n        newErrors.password_confirmation = 'Passwords do not match';\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (validateForm()) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full p-4 sm:p-6 max-h-[90vh] overflow-y-auto\">\n        <h3 className=\"text-lg font-semibold mb-4\">\n          {partner ? 'Edit Partner' : 'Add New Partner'}\n        </h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Supplier Type *</label>\n            <select\n              name=\"supplier_type\"\n              value={formData.supplier_type}\n              onChange={handleChange}\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.supplier_type ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            >\n              <option value=\"\">Select supplier type</option>\n              <option value=\"hotel\">Hotel</option>\n              <option value=\"restaurant\">Restaurant</option>\n              <option value=\"tour_operator\">Tour Operator</option>\n              <option value=\"transport\">Transport Service</option>\n              <option value=\"activity\">Activity Provider</option>\n              <option value=\"travel_agency\">Travel Agency</option>\n              <option value=\"other\">Other</option>\n            </select>\n            {errors.supplier_type && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.supplier_type}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Supplier Name *</label>\n            <input\n              type=\"text\"\n              name=\"supplier_name\"\n              value={formData.supplier_name}\n              onChange={handleChange}\n              placeholder=\"Enter your business name\"\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.supplier_name ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            />\n            {errors.supplier_name && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.supplier_name}</p>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Mobile *</label>\n              <input\n                type=\"tel\"\n                name=\"mobile\"\n                value={formData.mobile}\n                onChange={handleChange}\n                placeholder=\"+254712345678\"\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.mobile ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required\n              />\n              {errors.mobile && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.mobile}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Email Address *</label>\n              <input\n                type=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                placeholder=\"Enter your email\"\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.email ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required\n              />\n              {errors.email && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Contact Person *</label>\n            <input\n              type=\"text\"\n              name=\"contact_person\"\n              value={formData.contact_person}\n              onChange={handleChange}\n              placeholder=\"Enter your name\"\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.contact_person ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            />\n            {errors.contact_person && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.contact_person}</p>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Password {!partner && '*'}\n              </label>\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                placeholder={partner ? \"Leave blank to keep current password\" : \"Enter your password\"}\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.password ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required={!partner}\n              />\n              {errors.password && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.password}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Confirm Password {!partner && '*'}\n              </label>\n              <input\n                type=\"password\"\n                name=\"password_confirmation\"\n                value={formData.password_confirmation}\n                onChange={handleChange}\n                placeholder=\"Repeat your password\"\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.password_confirmation ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required={!partner}\n              />\n              {errors.password_confirmation && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.password_confirmation}</p>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Description</label>\n            <textarea\n              name=\"description\"\n              value={formData.description}\n              onChange={handleChange}\n              placeholder=\"Describe your business\"\n              rows=\"3\"\n              className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">City *</label>\n              <input\n                type=\"text\"\n                name=\"city\"\n                value={formData.city}\n                onChange={handleChange}\n                placeholder=\"Enter your city\"\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.city ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required\n              />\n              {errors.city && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.city}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Status</label>\n              <select\n                name=\"status\"\n                value={formData.status}\n                onChange={handleChange}\n                className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500\"\n                disabled={currentAdminRole !== 0}\n              >\n                <option value=\"pending\">Pending</option>\n                <option value=\"active\">Active</option>\n                <option value=\"inactive\">Inactive</option>\n              </select>\n              {currentAdminRole !== 0 && (\n                <p className=\"mt-1 text-xs text-gray-500\">Only Super Admin can change status</p>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Address *</label>\n            <textarea\n              name=\"address\"\n              value={formData.address}\n              onChange={handleChange}\n              placeholder=\"Enter your address\"\n              rows=\"2\"\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.address ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            />\n            {errors.address && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.address}</p>\n            )}\n          </div>\n\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 text-sm font-medium text-white bg-cyan-500 hover:bg-cyan-600 rounded-md transition\"\n            >\n              {partner ? 'Update' : 'Create'} Partner\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst BookingsManagement = ({ currentAdminRole, setSuccessMessage, setApiErrors }) => {\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingBooking, setEditingBooking] = useState(null);\n  const [showForm, setShowForm] = useState(false);\n  const [nationalities, setNationalities] = useState([]);\n  const [roomTypes, setRoomTypes] = useState([]);\n  const [error, setError] = useState(\"\");\n\n  const fetchBookings = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(\"\");\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) {\n        console.error(\"No admin token found\");\n        setError(\"No authentication token found. Please log in again.\");\n        setLoading(false);\n        return;\n      }\n\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/admin/bookings\", {\n        method: \"GET\",\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        const responseText = await response.text();\n        let data;\n\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error(\"JSON Parse Error:\", parseError);\n          setError(\"Server returned an invalid response format.\");\n          setBookings([]);\n          return;\n        }\n        \n        if (Array.isArray(data)) {\n          setBookings(data);\n        } else if (data.data && Array.isArray(data.data)) {\n          setBookings(data.data);\n        } else if (data.bookings && Array.isArray(data.bookings)) {\n          setBookings(data.bookings);\n        } else {\n          console.warn(\"Unexpected bookings response format:\", data);\n          setBookings([]);\n        }\n      } else if (response.status === 500) {\n        setError(\"Server error: Unable to load bookings. Please try again later or contact support.\");\n        console.error(\"Server error while fetching bookings:\", response.status);\n        setApiErrors(prev => ({ ...prev, bookings: \"Internal Server Error (500)\" }));\n        setBookings([]);\n      } else {\n        setError(`Failed to load bookings: Server returned ${response.status} error`);\n        console.error(\"Failed to fetch bookings:\", response.status);\n        setApiErrors(prev => ({ ...prev, bookings: `HTTP ${response.status}` }));\n        setBookings([]);\n      }\n    } catch (error) {\n      setError(\"Network error: Unable to fetch bookings. Please check your connection.\");\n      console.error(\"Error fetching bookings:\", error);\n      setApiErrors(prev => ({ ...prev, bookings: error.message }));\n      setBookings([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [setApiErrors]);\n\n  const fetchNationalities = useCallback(async () => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/nationalities\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        const responseText = await response.text();\n        let data;\n\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error(\"JSON Parse Error:\", parseError);\n          setNationalities(getFallbackNationalities());\n          return;\n        }\n        \n        setNationalities(data);\n      } else {\n        setNationalities(getFallbackNationalities());\n      }\n    } catch (error) {\n      console.error(\"Error fetching nationalities:\", error);\n      setNationalities(getFallbackNationalities());\n    }\n  }, []);\n\n  const getFallbackNationalities = () => [\n    { id: 1, name: \"Kenyan\" },\n    { id: 2, name: \"American\" },\n    { id: 3, name: \"British\" },\n    { id: 4, name: \"Canadian\" },\n    { id: 5, name: \"German\" },\n    { id: 6, name: \"French\" },\n    { id: 7, name: \"Chinese\" },\n    { id: 8, name: \"Indian\" },\n  ];\n\n  const fetchRoomTypes = useCallback(async () => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/room_types\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        const responseText = await response.text();\n        let data;\n\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error(\"JSON Parse Error:\", parseError);\n          setRoomTypes(getFallbackRoomTypes());\n          return;\n        }\n        \n        setRoomTypes(data);\n      } else {\n        setRoomTypes(getFallbackRoomTypes());\n      }\n    } catch (error) {\n      console.error(\"Error fetching room types:\", error);\n      setRoomTypes(getFallbackRoomTypes());\n    }\n  }, []);\n\n  const getFallbackRoomTypes = () => [\n    { id: 1, name: \"Single Room\" },\n    { id: 2, name: \"Double Room\" },\n    { id: 3, name: \"Deluxe Room\" },\n    { id: 4, name: \"Suite\" },\n    { id: 5, name: \"Executive Suite\" },\n  ];\n\n  useEffect(() => {\n    fetchBookings();\n    fetchNationalities();\n    fetchRoomTypes();\n  }, [fetchBookings, fetchNationalities, fetchRoomTypes]);\n\n  const handleEdit = (booking) => {\n    setEditingBooking(booking);\n    setShowForm(true);\n  };\n\n  const handleDelete = async (bookingId) => {\n    if (currentAdminRole !== 0) {\n      alert(\"Only Super Admin can delete bookings.\");\n      return;\n    }\n\n    if (!window.confirm(\"Are you sure you want to delete this booking?\")) return;\n\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(`http://127.0.0.1:3000/api/v1/admin/bookings/${bookingId}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        setSuccessMessage(\"âœ… Booking deleted successfully!\");\n        fetchBookings();\n      } else if (response.status === 500) {\n        alert(\"Server error: Unable to delete booking. Please try again later.\");\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        alert(`Failed to delete booking: ${errorData.message || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error(\"Error deleting booking:\", error);\n      alert(\"Failed to delete booking: Network error\");\n    }\n  };\n\n  const handleSubmit = async (formData) => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const url = editingBooking\n        ? `http://127.0.0.1:3000/api/v1/admin/bookings/${editingBooking.id}`\n        : \"http://127.0.0.1:3000/api/v1/admin/bookings\";\n\n      const method = editingBooking ? \"PUT\" : \"POST\";\n      \n      const requestData = {\n        booking: {\n          user_id: parseInt(formData.user_id),\n          room_type: formData.room_type,\n          check_in: formData.check_in,\n          check_out: formData.check_out,\n          guests: parseInt(formData.guests),\n          nationality: formData.nationality,\n          status: formData.status,\n        }\n      };\n\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify(requestData),\n      });\n\n      const responseText = await response.text();\n      let result;\n\n      try {\n        result = JSON.parse(responseText);\n      } catch (parseError) {\n        console.error(\"JSON Parse Error:\", parseError);\n        throw new Error(\"Server returned an invalid response.\");\n      }\n\n      if (response.ok) {\n        const successMsg = editingBooking \n          ? \"âœ… Booking updated successfully!\"\n          : \"âœ… Booking created successfully!\";\n        \n        setSuccessMessage(successMsg);\n        setShowForm(false);\n        setEditingBooking(null);\n        fetchBookings();\n      } else if (response.status === 500) {\n        throw new Error(\"Internal Server Error: The server encountered an error while processing your request. Please try again later.\");\n      } else {\n        const errorMessage = result.error || \n                           result.message || \n                           result.errors?.join(', ') || \n                           `Server returned ${response.status} error`;\n        throw new Error(errorMessage);\n      }\n    } catch (error) {\n      console.error(\"Error saving booking:\", error);\n      alert(`Failed to save booking: ${error.message}`);\n    }\n  };\n\n  const handleRetry = () => {\n    fetchBookings();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-8\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto\"></div>\n        <p className=\"mt-4 text-gray-600\">Loading bookings...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div>\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">All Bookings</h2>\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\"\n          >\n            Create New Booking\n          </button>\n        </div>\n\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-6 text-center\">\n          <svg className=\"mx-auto h-12 w-12 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n          </svg>\n          <h3 className=\"mt-4 text-lg font-medium text-red-800\">Unable to Load Bookings</h3>\n          <p className=\"mt-2 text-red-600\">{error}</p>\n          <div className=\"mt-6\">\n            <button\n              onClick={handleRetry}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n\n        {showForm && (\n          <BookingForm\n            booking={editingBooking}\n            onSubmit={handleSubmit}\n            onCancel={() => {\n              setShowForm(false);\n              setEditingBooking(null);\n            }}\n            nationalities={nationalities}\n            roomTypes={roomTypes}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">All Bookings</h2>\n        <div className=\"flex space-x-2\">\n          <button\n            onClick={fetchBookings}\n            className=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm\"\n          >\n            Refresh\n          </button>\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\"\n          >\n            Create New Booking\n          </button>\n        </div>\n      </div>\n\n      {showForm && (\n        <BookingForm\n          booking={editingBooking}\n          onSubmit={handleSubmit}\n          onCancel={() => {\n            setShowForm(false);\n            setEditingBooking(null);\n          }}\n          nationalities={nationalities}\n          roomTypes={roomTypes}\n        />\n      )}\n\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Booking ID\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                User\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Room Type\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Dates\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Guests\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Status\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {bookings.length > 0 ? bookings.map((booking) => (\n              <tr key={booking.id} className=\"hover:bg-gray-50\">\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                  #{booking.id}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {booking.user?.email || booking.user_id || \"N/A\"}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {booking.room_type}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {new Date(booking.check_in).toLocaleDateString()} - {new Date(booking.check_out).toLocaleDateString()}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {booking.guests}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                    booking.status === 'confirmed' ? 'bg-green-100 text-green-800' :\n                    booking.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                    booking.status === 'completed' ? 'bg-blue-100 text-blue-800' :\n                    'bg-red-100 text-red-800'\n                  }`}>\n                    {booking.status}\n                  </span>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                  <button\n                    onClick={() => handleEdit(booking)}\n                    className=\"text-cyan-600 hover:text-cyan-900 font-medium\"\n                  >\n                    Edit\n                  </button>\n                  {currentAdminRole === 0 && (\n                    <button\n                      onClick={() => handleDelete(booking.id)}\n                      className=\"text-red-600 hover:text-red-900 font-medium\"\n                    >\n                      Delete\n                    </button>\n                  )}\n                </td>\n              </tr>\n            )) : (\n              <tr>\n                <td colSpan=\"7\" className=\"px-4 py-8 text-center\">\n                  <div className=\"text-gray-500\">\n                    <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                    </svg>\n                    <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No bookings</h3>\n                    <p className=\"mt-1 text-sm text-gray-500\">No bookings have been created yet.</p>\n                    <div className=\"mt-6\">\n                      <button\n                        onClick={() => setShowForm(true)}\n                        className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500\"\n                      >\n                        Create New Booking\n                      </button>\n                    </div>\n                  </div>\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nconst BookingForm = ({ booking, onSubmit, onCancel, nationalities, roomTypes }) => {\n  const getTodayDate = () => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  };\n\n  const getMinCheckoutDate = (checkInDate) => {\n    if (!checkInDate) return getTodayDate();\n    const checkIn = new Date(checkInDate);\n    const nextDay = new Date(checkIn);\n    nextDay.setDate(checkIn.getDate() + 1);\n    return nextDay.toISOString().split('T')[0];\n  };\n\n  const [formData, setFormData] = useState({\n    user_id: booking?.user_id || \"\",\n    room_type: booking?.room_type || \"\",\n    check_in: booking?.check_in || getTodayDate(),\n    check_out: booking?.check_out || getMinCheckoutDate(booking?.check_in || getTodayDate()),\n    guests: booking?.guests || 1,\n    nationality: booking?.nationality || \"\",\n    status: booking?.status || \"confirmed\",\n  });\n\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    \n    setFormData(prevData => {\n      const newData = {\n        ...prevData,\n        [name]: value,\n      };\n\n      if (name === 'check_in' && value) {\n        const minCheckout = getMinCheckoutDate(value);\n        if (new Date(newData.check_out) <= new Date(value)) {\n          newData.check_out = minCheckout;\n        }\n      }\n\n      return newData;\n    });\n\n    if (errors[name]) {\n      setErrors({\n        ...errors,\n        [name]: '',\n      });\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.user_id) newErrors.user_id = 'User ID is required';\n    if (!formData.room_type) newErrors.room_type = 'Room type is required';\n    if (!formData.check_in) newErrors.check_in = 'Check-in date is required';\n    if (!formData.check_out) newErrors.check_out = 'Check-out date is required';\n    if (!formData.guests || formData.guests < 1) newErrors.guests = 'Number of guests is required';\n    if (!formData.nationality) newErrors.nationality = 'Nationality is required';\n\n    const today = new Date(getTodayDate());\n    const checkIn = new Date(formData.check_in);\n    const checkOut = new Date(formData.check_out);\n\n    if (checkIn < today) {\n      newErrors.check_in = 'Check-in date cannot be in the past';\n    }\n\n    if (checkOut <= checkIn) {\n      newErrors.check_out = 'Check-out date must be after check-in date';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (validateForm()) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-md w-full p-4 sm:p-6 max-h-[90vh] overflow-y-auto\">\n        <h3 className=\"text-lg font-semibold mb-4\">\n          {booking ? 'Edit Booking' : 'Create New Booking'}\n        </h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">User ID *</label>\n            <input\n              type=\"number\"\n              name=\"user_id\"\n              value={formData.user_id}\n              onChange={handleChange}\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.user_id ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            />\n            {errors.user_id && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.user_id}</p>\n            )}\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Room Type *</label>\n            <select\n              name=\"room_type\"\n              value={formData.room_type}\n              onChange={handleChange}\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.room_type ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            >\n              <option value=\"\">Select Room Type</option>\n              {roomTypes.map((roomType) => (\n                <option key={roomType.id} value={roomType.name}>\n                  {roomType.name}\n                </option>\n              ))}\n            </select>\n            {errors.room_type && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.room_type}</p>\n            )}\n          </div>\n          \n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Check-in *</label>\n              <input\n                type=\"date\"\n                name=\"check_in\"\n                value={formData.check_in}\n                onChange={handleChange}\n                min={getTodayDate()}\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.check_in ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required\n              />\n              {errors.check_in && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.check_in}</p>\n              )}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Check-out *</label>\n              <input\n                type=\"date\"\n                name=\"check_out\"\n                value={formData.check_out}\n                onChange={handleChange}\n                min={getMinCheckoutDate(formData.check_in)}\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.check_out ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required\n              />\n              {errors.check_out && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.check_out}</p>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Guests *</label>\n              <input\n                type=\"number\"\n                name=\"guests\"\n                value={formData.guests}\n                onChange={handleChange}\n                min=\"1\"\n                max=\"20\"\n                className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                  errors.guests ? 'border-red-300' : 'border-gray-300'\n                }`}\n                required\n              />\n              {errors.guests && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.guests}</p>\n            )}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Status</label>\n              <select\n                name=\"status\"\n                value={formData.status}\n                onChange={handleChange}\n                className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500\"\n              >\n                <option value=\"pending\">Pending</option>\n                <option value=\"confirmed\">Confirmed</option>\n                <option value=\"cancelled\">Cancelled</option>\n                <option value=\"completed\">Completed</option>\n              </select>\n            </div>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Nationality *</label>\n            <select\n              name=\"nationality\"\n              value={formData.nationality}\n              onChange={handleChange}\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.nationality ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            >\n              <option value=\"\">Select Nationality</option>\n              {nationalities.map((nationality) => (\n                <option key={nationality.id} value={nationality.name}>\n                  {nationality.name}\n                </option>\n              ))}\n            </select>\n            {errors.nationality && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.nationality}</p>\n            )}\n          </div>\n          \n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 text-sm font-medium text-white bg-cyan-500 hover:bg-cyan-600 rounded-md transition\"\n            >\n              {booking ? 'Update' : 'Create'} Booking\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst UsersManagement = ({ currentAdminRole, setApiErrors }) => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const fetchUsers = useCallback(async () => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) {\n        console.error(\"No admin token found\");\n        setLoading(false);\n        return;\n      }\n\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/admin/users\", {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        const responseText = await response.text();\n        let data;\n\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error(\"JSON Parse Error:\", parseError);\n          setUsers([]);\n          return;\n        }\n        \n        setUsers(data);\n      } else {\n        console.error(\"Failed to fetch users:\", response.status);\n        setApiErrors(prev => ({ ...prev, users: `HTTP ${response.status}` }));\n      }\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      setApiErrors(prev => ({ ...prev, users: error.message }));\n    } finally {\n      setLoading(false);\n    }\n  }, [setApiErrors]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  const handleDeleteUser = async (userId) => {\n    if (currentAdminRole !== 0) {\n      alert(\"Only Super Admin can delete users.\");\n      return;\n    }\n\n    if (!window.confirm(\"Are you sure you want to delete this user?\")) return;\n\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(`http://127.0.0.1:3000/api/v1/admin/users/${userId}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        alert(\"User deleted successfully!\");\n        fetchUsers();\n      } else {\n        alert(\"Failed to delete user\");\n      }\n    } catch (error) {\n      console.error(\"Error deleting user:\", error);\n      alert(\"Failed to delete user\");\n    }\n  };\n\n  if (loading) return <div className=\"text-center py-8\">Loading users...</div>;\n\n  return (\n    <div>\n      <h2 className=\"text-lg font-semibold text-gray-900 mb-6\">Users Management</h2>\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                User ID\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Email\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Role\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Created At\n              </th>\n              {currentAdminRole === 0 && (\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Actions\n                </th>\n              )}\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {users.length > 0 ? users.map((user) => (\n              <tr key={user.id}>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                  #{user.id}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {user.email}\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                    user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {user.role}\n                  </span>\n                </td>\n                <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {new Date(user.created_at).toLocaleDateString()}\n                </td>\n                {currentAdminRole === 0 && (\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button\n                      onClick={() => handleDeleteUser(user.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                )}\n              </tr>\n            )) : (\n              <tr>\n                <td colSpan={currentAdminRole === 0 ? \"5\" : \"4\"} className=\"px-4 py-4 text-center text-sm text-gray-500\">\n                  No users found\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nconst AdminManagement = ({ currentAdminRole, setApiErrors }) => {\n  const [admins, setAdmins] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const fetchAdmins = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(\"\");\n      const token = localStorage.getItem(\"adminToken\");\n      \n      if (!token) {\n        setError(\"No authentication token found. Please log in again.\");\n        setLoading(false);\n        return;\n      }\n\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/admin/admins\", {\n        method: \"GET\",\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        const responseText = await response.text();\n        let data;\n\n        try {\n          data = JSON.parse(responseText);\n        } catch (parseError) {\n          console.error(\"JSON Parse Error:\", parseError);\n          setError(\"Server returned an invalid response format.\");\n          setAdmins([]);\n          return;\n        }\n        \n        if (Array.isArray(data)) {\n          setAdmins(data);\n        } else if (data.data && Array.isArray(data.data)) {\n          setAdmins(data.data);\n        } else if (data.admins && Array.isArray(data.admins)) {\n          setAdmins(data.admins);\n        } else {\n          console.warn(\"Unexpected admins response format:\", data);\n          setAdmins([]);\n        }\n      } else {\n        setError(`Failed to load admins: Server returned ${response.status} error`);\n        setApiErrors(prev => ({ ...prev, admins: `HTTP ${response.status}` }));\n        setAdmins([]);\n      }\n    } catch (error) {\n      setError(\"Network error: Unable to fetch admin data. Please check your connection.\");\n      console.error(\"Error fetching admins:\", error);\n      setApiErrors(prev => ({ ...prev, admins: error.message }));\n      setAdmins([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [setApiErrors]);\n\n  useEffect(() => {\n    if (currentAdminRole === 0) {\n      fetchAdmins();\n    }\n  }, [currentAdminRole, fetchAdmins]);\n\n  const handleCreateAdmin = async (formData) => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(\"http://127.0.0.1:3000/api/v1/admin/admins\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          admin: {\n            email: formData.email,\n            password: formData.password,\n            password_confirmation: formData.password_confirmation,\n            role: 1\n          }\n        }),\n      });\n\n      const responseText = await response.text();\n      let result;\n\n      try {\n        result = JSON.parse(responseText);\n      } catch (parseError) {\n        console.error(\"JSON Parse Error:\", parseError);\n        throw new Error(\"Server returned an invalid response.\");\n      }\n\n      if (response.ok) {\n        alert(\"Admin created successfully!\");\n        setShowForm(false);\n        fetchAdmins();\n      } else {\n        throw new Error(result.errors?.join(', ') || result.error || `Server returned ${response.status} error`);\n      }\n    } catch (error) {\n      console.error(\"Error creating admin:\", error);\n      alert(`Failed to create admin: ${error.message}`);\n    }\n  };\n\n  const handleDeleteAdmin = async (adminId) => {\n    if (!window.confirm(\"Are you sure you want to delete this admin? This action cannot be undone.\")) return;\n\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(`http://127.0.0.1:3000/api/v1/admin/admins/${adminId}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        alert(\"Admin deleted successfully!\");\n        fetchAdmins();\n      } else {\n        alert(\"Failed to delete admin. Please try again.\");\n      }\n    } catch (error) {\n      console.error(\"Error deleting admin:\", error);\n      alert(\"Failed to delete admin due to a network error.\");\n    }\n  };\n\n  const handleRetry = () => {\n    fetchAdmins();\n  };\n\n  if (currentAdminRole !== 0) {\n    return (\n      <div className=\"text-center py-8\">\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6 inline-block\">\n          <svg className=\"mx-auto h-12 w-12 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-3a2 2 0 00-2-2H6a2 2 0 00-2 2v3a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n          </svg>\n          <h3 className=\"mt-4 text-lg font-medium text-yellow-800\">Access Restricted</h3>\n          <p className=\"mt-2 text-yellow-700\">\n            Admin Management is only available to Super Administrators.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-8\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto\"></div>\n        <p className=\"mt-4 text-gray-600\">Loading admin data...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div>\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Admin Management</h2>\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\"\n          >\n            Add New Admin\n          </button>\n        </div>\n\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-12 w-12 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n              </svg>\n            </div>\n            <div className=\"ml-4\">\n              <h3 className=\"text-lg font-medium text-red-800\">Unable to Load Admin Data</h3>\n              <div className=\"mt-2 text-red-700\">\n                <p>{error}</p>\n              </div>\n              <div className=\"mt-6\">\n                <button\n                  onClick={handleRetry}\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                >\n                  <svg className=\"mr-2 h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                  </svg>\n                  Try Again\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {showForm && (\n          <AdminForm\n            onSubmit={handleCreateAdmin}\n            onCancel={() => setShowForm(false)}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">Admin Management</h2>\n        <div className=\"flex space-x-2\">\n          <button\n            onClick={fetchAdmins}\n            className=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm\"\n          >\n            Refresh\n          </button>\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\"\n          >\n            Add New Admin\n          </button>\n        </div>\n      </div>\n\n      {showForm && (\n        <AdminForm\n          onSubmit={handleCreateAdmin}\n          onCancel={() => setShowForm(false)}\n        />\n      )}\n\n      <div className=\"bg-white shadow-sm border border-gray-200 rounded-lg overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Admin ID\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Email\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Role\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Created At\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {admins.length > 0 ? admins.map((admin) => (\n                <tr key={admin.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    #{admin.id}\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {admin.email}\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      admin.role === 0 ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'\n                    }`}>\n                      {admin.role === 0 ? 'Super Admin' : 'Admin'}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {new Date(admin.created_at).toLocaleDateString()}\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button\n                      onClick={() => handleDeleteAdmin(admin.id)}\n                      className=\"text-red-600 hover:text-red-900 font-medium\"\n                      disabled={admin.role === 0}\n                    >\n                      {admin.role === 0 ? 'Cannot Delete' : 'Delete'}\n                    </button>\n                  </td>\n                </tr>\n              )) : (\n                <tr>\n                  <td colSpan=\"5\" className=\"px-4 py-8 text-center\">\n                    <div className=\"text-gray-500\">\n                      <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-3a2 2 0 00-2-2H6a2 2 0 00-2 2v3a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                      </svg>\n                      <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No admins found</h3>\n                      <p className=\"mt-1 text-sm text-gray-500\">Get started by creating a new admin account.</p>\n                      <div className=\"mt-6\">\n                        <button\n                          onClick={() => setShowForm(true)}\n                          className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500\"\n                        >\n                          Add New Admin\n                        </button>\n                      </div>\n                    </div>\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst AdminForm = ({ onSubmit, onCancel }) => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    password_confirmation: \"\",\n    role: 1,\n  });\n\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n    if (errors[name]) {\n      setErrors({\n        ...errors,\n        [name]: '',\n      });\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.email) newErrors.email = 'Email is required';\n    if (!formData.password) newErrors.password = 'Password is required';\n    if (formData.password.length < 6) newErrors.password = 'Password must be at least 6 characters';\n    if (formData.password !== formData.password_confirmation) {\n      newErrors.password_confirmation = 'Passwords do not match';\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (formData.email && !emailRegex.test(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (validateForm()) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-md w-full p-4 sm:p-6\">\n        <h3 className=\"text-lg font-semibold mb-4\">Create New Admin</h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Email *</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              placeholder=\"Enter admin email address\"\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.email ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n            />\n            {errors.email && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Password *</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              placeholder=\"Enter password (min 6 characters)\"\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.password ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n              minLength=\"6\"\n            />\n            {errors.password && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.password}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Confirm Password *</label>\n            <input\n              type=\"password\"\n              name=\"password_confirmation\"\n              value={formData.password_confirmation}\n              onChange={handleChange}\n              placeholder=\"Confirm password\"\n              className={`mt-1 block w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 ${\n                errors.password_confirmation ? 'border-red-300' : 'border-gray-300'\n              }`}\n              required\n              minLength=\"6\"\n            />\n            {errors.password_confirmation && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.password_confirmation}</p>\n            )}\n          </div>\n\n          <input type=\"hidden\" name=\"role\" value={1} />\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <svg className=\"h-5 w-5 text-blue-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-blue-700\">\n                  This admin will be created with <strong>Admin</strong> role. Only existing Super Admin can create other admins.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 text-sm font-medium text-white bg-cyan-500 hover:bg-cyan-600 rounded-md transition\"\n            >\n              Create Admin\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst MessagesManagement = ({ currentAdminRole, setApiErrors }) => {\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const fetchMessages = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(\"\");\n\n      const token = localStorage.getItem(\"adminToken\");\n\n      if (!token) {\n        setError(\"No authentication token found. Please log in again.\");\n        setLoading(false);\n        return;\n      }\n\n      const response = await fetch(\n        \"http://127.0.0.1:3000/api/v1/admin/contact_messages\",\n        {\n          method: \"GET\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (response.ok) {\n        const responseText = await response.text();\n\n        if (!responseText.trim()) {\n          setMessages([]);\n          return;\n        }\n\n        let data;\n        try {\n          data = JSON.parse(responseText);\n        } catch (e) {\n          console.error(\"Invalid JSON response:\", e);\n          setError(\"Server returned invalid JSON.\");\n          setMessages([]);\n          return;\n        }\n\n        // Handle different response formats\n        const extracted =\n          Array.isArray(data) ? data :\n          data.contact_messages ? data.contact_messages :\n          data.messages ? data.messages :\n          data.data ? data.data :\n          [];\n\n        setMessages(extracted);\n      } else if (response.status === 401) {\n        // Handle unauthorized access - this should not happen for super admin\n        setError(\"Access denied. Please check your admin permissions.\");\n        setApiErrors((prev) => ({ ...prev, messages: \"Unauthorized (401)\" }));\n      } else if (response.status === 403) {\n        setError(\"You don't have permission to access messages.\");\n        setApiErrors((prev) => ({ ...prev, messages: \"Forbidden (403)\" }));\n      } else {\n        setError(`Server returned ${response.status} error`);\n        setApiErrors((prev) => ({ ...prev, messages: `HTTP ${response.status}` }));\n        setMessages([]);\n      }\n    } catch (error) {\n      setError(\"Network error. Please check your connection.\");\n      setApiErrors((prev) => ({ ...prev, messages: error.message }));\n      setMessages([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [setApiErrors]);\n\n  useEffect(() => {\n    fetchMessages();\n  }, [fetchMessages]);\n\n  const handleMarkAsRead = async (messageId) => {\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(\n        `http://127.0.0.1:3000/api/v1/admin/contact_messages/${messageId}/mark_as_read`,\n        {\n          method: \"PATCH\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (response.ok) {\n        setMessages((prev) =>\n          prev.map((msg) =>\n            msg.id === messageId ? { ...msg, status: \"read\" } : msg\n          )\n        );\n      } else if (response.status === 401 || response.status === 403) {\n        alert(\"You don't have permission to mark messages as read.\");\n      }\n    } catch (error) {\n      console.error(\"Error marking read:\", error);\n    }\n  };\n\n  const handleReply = (message) => {\n    const subject = encodeURIComponent(\"Re: Your message to Southcoast Outdoors\");\n    const body = encodeURIComponent(\n      `Dear ${message.name},\n\nThank you for contacting Southcoast Outdoors. We have received your message and will get back to you shortly.\n\nBest regards,\nSouthcoast Outdoors Team\n\n---\nOriginal Message:\n${message.message}`\n    );\n    window.location.href = `mailto:${message.email}?subject=${subject}&body=${body}`;\n  };\n\n  const handleDeleteMessage = async (messageId) => {\n    if (currentAdminRole !== 0) {\n      alert(\"Only Super Admin can delete messages.\");\n      return;\n    }\n\n    if (!window.confirm(\"Are you sure you want to delete this message?\"))\n      return;\n\n    try {\n      const token = localStorage.getItem(\"adminToken\");\n      const response = await fetch(\n        `http://127.0.0.1:3000/api/v1/admin/contact_messages/${messageId}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (response.ok) {\n        setMessages((prev) => prev.filter((msg) => msg.id !== messageId));\n      } else if (response.status === 401 || response.status === 403) {\n        alert(\"You don't have permission to delete messages.\");\n      }\n    } catch (error) {\n      console.error(\"Delete error:\", error);\n    }\n  };\n\n  const handleRetry = () => fetchMessages();\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-8\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto\"></div>\n        <p className=\"mt-4 text-gray-600\">Loading messages...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div>\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-6\">Messages Management</h2>\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-12 w-12 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n              </svg>\n            </div>\n            <div className=\"ml-4\">\n              <h3 className=\"text-lg font-medium text-yellow-800\">Access Issue</h3>\n              <div className=\"mt-2 text-yellow-700\">\n                <p>{error}</p>\n                <p className=\"mt-2 text-sm\">\n                  Current admin role: {currentAdminRole === 0 ? 'Super Admin' : 'Admin'}\n                </p>\n              </div>\n              <div className=\"mt-6\">\n                <button\n                  onClick={handleRetry}\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\n                >\n                  Try Again\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <h2 className=\"text-lg font-semibold text-gray-900 mb-6\">Messages Management</h2>\n\n      <div className=\"mb-4 flex justify-between items-center\">\n        <button\n          onClick={fetchMessages}\n          className=\"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-md text-sm\"\n        >\n          Refresh\n        </button>\n        <span className=\"text-sm text-gray-500\">\n          {messages.length} message{messages.length !== 1 ? \"s\" : \"\"}\n        </span>\n      </div>\n\n      {messages.length === 0 ? (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center\">\n          <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n          </svg>\n          <h3 className=\"mt-4 text-lg font-semibold text-gray-900 mb-2\">No messages yet</h3>\n          <p className=\"text-gray-500\">No contact messages have been received yet.</p>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {messages.map((message) => (\n            <div key={message.id} className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow\">\n              <div className=\"flex justify-between items-start mb-2\">\n                <div>\n                  <p className=\"font-medium text-gray-900\">{message.name}</p>\n                  <p className=\"text-sm text-gray-500\">{message.email}</p>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  {message.status !== \"read\" && (\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\n                      New\n                    </span>\n                  )}\n                  <span className=\"text-xs text-gray-400\">\n                    {new Date(message.created_at || message.sent_at || Date.now()).toLocaleDateString()}\n                  </span>\n                </div>\n              </div>\n              \n              <div className=\"mt-3 p-3 bg-gray-50 rounded-lg\">\n                <p className=\"text-gray-700 whitespace-pre-wrap\">{message.message}</p>\n              </div>\n\n              <div className=\"flex justify-between mt-4 text-sm\">\n                <div className=\"flex space-x-3\">\n                  {message.status !== \"read\" && (\n                    <button\n                      onClick={() => handleMarkAsRead(message.id)}\n                      className=\"text-cyan-600 hover:text-cyan-800 font-medium\"\n                    >\n                      Mark as Read\n                    </button>\n                  )}\n                  <button\n                    onClick={() => handleReply(message)}\n                    className=\"text-green-600 hover:text-green-800 font-medium\"\n                  >\n                    Reply via Email\n                  </button>\n                </div>\n\n                {currentAdminRole === 0 && (\n                  <button\n                    onClick={() => handleDeleteMessage(message.id)}\n                    className=\"text-red-600 hover:text-red-800 font-medium\"\n                  >\n                    Delete\n                  </button>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}